{"version":3,"sources":["pnp.min.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","$pnp","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length",1,"factory","v","undefined","ProvisioningStep_1","ObjectNavigation_1","ObjectPropertyBagEntries_1","ObjectFeatures_1","ObjectWebSettings_1","ObjectComposedLook_1","ObjectCustomActions_1","ObjectFiles_1","ObjectLists_1","util_1","Resources","Provisioning_1","Core","handlers","Navigation","ObjectNavigation","PropertyBagEntries","ObjectPropertyBagEntries","Features","ObjectFeatures","WebSettings","ObjectWebSettings","ComposedLook","ObjectComposedLook","CustomActions","ObjectCustomActions","Files","ObjectFiles","Lists","ObjectLists","prototype","applyTemplate","path","_options","_this","url","replaceUrlTokens","options","Promise","resolve","reject","jQuery","getJSON","template","start","Object","keys","then","fail","Log","error","Template_invalid","json","queue","info","Code_execution_started","startTime","Date","getTime","queueItems","forEach","q","index","push","ProvisioningStep","Parameters","promises","Deferred","promise","execute","all","Code_execution_ended","../../../sharepoint/util","../ObjectHandlers/ObjectComposedLook/ObjectComposedLook","../ObjectHandlers/ObjectCustomActions/ObjectCustomActions","../ObjectHandlers/ObjectFeatures/ObjectFeatures","../ObjectHandlers/ObjectFiles/ObjectFiles","../ObjectHandlers/ObjectLists/ObjectLists","../ObjectHandlers/ObjectNavigation/ObjectNavigation","../ObjectHandlers/ObjectPropertyBagEntries/ObjectPropertyBagEntries","../ObjectHandlers/ObjectWebSettings/ObjectWebSettings","../Provisioning","../Resources/Resources","./ProvisioningStep",2,"name","objects","parameters","handler","dependentPromise","_handler","ProvisionObjects",3,"Logger","isLoggerDefined","console","log","spacing","object","message","print","String","format","debug","msg",4,"__extends","d","b","__","constructor","p","hasOwnProperty","create","ObjectHandlerBase_1","_super","scope_started","clientContext","SP","ClientContext","get_current","web","get_web","colorPaletteUrl","ColorPaletteUrl","fontSchemeUrl","FontSchemeUrl","backgroundImageUrl","BackgroundImageUrl","applyTheme","getRelativeUrl","update","executeQueryAsync","scope_ended","ObjectHandlerBase","../../../util","../ObjectHandlerBase/ObjectHandlerBase",5,"customactions","userCustomActions","get_userCustomActions","load","obj","objExists","grep","get_data","userCustomAction","get_title","Title","objCreationInformation","add","Description","set_description","CommandUIExtension","set_commandUIExtension","Group","set_group","set_title","Url","set_url","ScriptBlock","set_scriptBlock","ScriptSrc","set_scriptSrc","Location","set_location","ImageUrl","set_imageUrl","Name","set_name","RegistrationId","set_registrationId","RegistrationType","set_registrationType","Rights","set_rights","Sequence","set_sequence",6,"features","webFeatures","get_features","Deactivate","remove","Guid","ID","FeatureDefinitionScope","none",7,"fileInfos","filename","GetFilenameFromFilePath","Dest","webServerRelativeUrl","_spPageContextInfo","folder","getFolderByServerRelativeUrl","GetFolderFromFilePath","get","Src","fileContents","extend","Filename","Folder","Contents","when","apply","done","indexOf","FileCreationInformation","set_overwrite","Overwrite","set_content","Base64EncodedByteArray","get_content","append","charCodeAt","get_files","Properties","ApplyFileProperties","WebParts","AddWebPartsToWebPartPage","RemoveExistingWebParts","ModifyHiddenViews","RemoveWebPartsFromFileIfSpecified","limitedWebPartManager","shouldRemoveExisting","existingWebParts","get_webParts","wp","deleteWebPart","GetWebPartXml","webParts","FileUrl","res","rej","fileUrl","xml","Xml","dest","src","fileServerRelativeUrl","file","getFileByServerRelativeUrl","getLimitedWebPartManager","PersonalizationScope","shared","webPartsWithXml","oWebPartDefinition","importWebPart","oWebPart","get_webPart","addWebPart","Zone","Order","fileProperties","listItemAllFields","get_listItemAllFields","key","set_item","GetViewFromCollectionByUrl","viewCollection","serverRelativeUrl","viewCollectionEnumerator","getEnumerator","moveNext","view","get_serverRelativeUrl","toString","toLowerCase","mapping","lists","listViewCollections","Views","List","get_lists","getByTitle","get_views","views","list","Paged","set_paged","Query","set_viewQuery","RowLimit","set_rowLimit","ViewFields","columns_1","get_viewFields","removeAll","vf","filePath","split","splice","join","../../../../sharepoint/util",8,"../../Provisioning","../../Resources/Resources",9,"Sequencer_1","listInstances","existingObj","EnableVersioning","set_enableVersioning","EnableMinorVersions","set_enableMinorVersions","EnableModeration","set_enableModeration","EnableFolderCreation","set_enableFolderCreation","EnableAttachments","set_enableAttachments","NoCrawl","set_noCrawl","DefaultDisplayFormUrl","set_defaultDisplayFormUrl","DefaultEditFormUrl","set_defaultEditFormUrl","DefaultNewFormUrl","set_defaultNewFormUrl","DraftVersionVisibility","set_draftVersionVisibility","DraftVisibilityType","Hidden","set_hidden","ForceCheckout","set_forceCheckout","ListCreationInformation","OnQuickLaunch","value","QuickLaunchOptions","on","off","set_quickLaunchOption","TemplateType","set_templateType","createdList","toLocaleLowerCase","sequencer","Sequencer","ApplyContentTypeBindings","ApplyListInstanceFieldRefs","ApplyFields","ApplyLookupFields","ApplyListSecurity","CreateViews","InsertDataRows","CreateFolders","ListInstances","Objects","EnsureLocationBasedMetadataDefaultsReceiver","eventReceivers","get_eventReceivers","eventRecCreationInfo","EventReceiverDefinitionCreationInformation","set_receiverName","set_synchronization","set_sequenceNumber","set_receiverAssembly","set_receiverClass","set_eventType","EventReceiverType","itemAdded","params","Folders","folderServerRelativeUrl","rootFolder","get_rootFolder","metadataDefaults","setMetadataDefaults","folderUrl","get_folders","DefaultValues","metadataDefaultsFileCreateInfo","webCts","get_site","get_rootWeb","get_contentTypes","listCts","ContentTypeBindings","set_contentTypesEnabled","listContentTypes","existingContentTypes","Array","RemoveExistingContentTypes","ct","ctb","addExistingContentType","getById","ContentTypeId","j","ect","deleteObject","siteFields","get_fields","FieldRefs","fr","field","getByInternalNameOrTitle","Fields","fieldXml","GetFieldXml","fieldType","GetFieldXmlAttr","addFieldAsXml","AddFieldOptions","addToAllContentTypes","attr","parseXML","find","SchemaXml","properties_1","prop","targetList","get_id","Type","Formula","Security","BreakRoleInheritance","breakRoleInheritance","CopyRoleAssignments","ClearSubscopes","get_roleAssignments","allProperties","get_allProperties","siteGroups","get_siteGroups","roleDefinitions","get_roleDefinitions","RoleAssignments","ra","roleDef","RoleDefinition","getByName","roleBindings","RoleDefinitionBindingCollection","newObject","principal","Principal","match","token","substring","groupId","get_fieldValues","viewExists","ev","RemoveExistingViews","Scope","set_scope","viewCreationInformation","ViewCreationInformation","PersonalView","set_personalView","set_query","SetAsDefaultView","set_setAsDefaultView","set_viewFields","ViewTypeKind","set_viewTypeKind","ViewType","html","DataRows","item","addItem","ListItemCreationInformation","../../Sequencer/Sequencer",10,"navigation","get_navigation","ConfigureQuickLaunch","QuickLaunch","nodes","quickLaunchNodeCollection_1","get_quickLaunch","temporaryQuickLaunch","get_count","oldNode","itemAt","existingNode","getNodeFromCollectionByTitle","newNode","NavigationNodeCreationInformation","get_url","set_asLastNode","ajax","webAbsoluteUrl","type","headers","accept","data","results","node","getNodeById","Id","childrenNodeCollection","get_children","parentNode","Children",11,"entries","clientContext_1","web_1","propBag_1","indexedProperties_1","entry","Key","Value","Indexed","encodePropertyKey",12,"WelcomePage","set_welcomePage","MasterUrl","set_masterUrl","CustomMasterUrl","set_customMasterUrl","SaveSiteAsTemplateEnabled","set_saveSiteAsTemplateEnabled","QuickLaunchEnabled","TreeViewEnabled","set_treeViewEnabled",13,"Core_1","Logger_1","Provisioning","core","./Core/Core","./Logger/Logger",14,15,"__functions","__parameter","__scope","parameter","scope","functions","deferredArray","DeferredObject","func","depFunc",16,"Util","collections_1","Queryable","baseUrl","_url","combinePaths","_query","Dictionary","concat","pathPart","toUrl","toUrlAndQuery","count","getKeys","query","map","ix","arr","../../collections/collections","../../utils/util",17,"Rest","Web","./web",18,"Queryable_1","Mixins","ContentTypes","id","select","selects","_i","arguments","filter","applyMixins","Gettable","Selectable","Filterable","ContentType","./Queryable","./mixins",19,"dup",20,"Items","Item",21,"items_1","views_1","contenttypes_1","queryable_1","title","contentTypes","items","./contenttypes","./items","./queryable","./views",22,"httpClient_1","client","HttpClient","response","status","statusText","../../net/httpClient",23,"quickLaunch_1","topNavigationBar_1","quicklaunch","topNavigationBar","TopNavigationBar","./quickLaunch","./topNavigationBar",24,25,26,27,"SiteUsers",28,29,"View",30,"lists_1","roleAssignments_1","navigation_1","siteUsers_1","contentTypes_1","roleAssignments","siteUsers","./contentTypes","./lists","./navigation","./roleAssignments","./siteUsers",31,"Rest_1","SharePoint","rest","provisioning","./Provisioning/Provisioning","./Rest/Rest",32,"getListId","pageListId","replace","document","location","protocol","hostname","nodeCollection","val","siteAbsoluteUrl","propKey","bytes","b64encoded","btoa","fromCharCode",33,34,"values","merge","source","getValues","clear",35,"Collections","providers","Providers","Settings","_settings","addJSON","JSON","stringify","hash","provider","getConfiguration","reason","parse","../collections/collections","./providers/providers",36,"storage","CachingConfigurationProvider","wrappedProvider","cacheKey","cacheStore","store","selectPnPCache","getWrappedProvider","enabled","cachedConfig","providerPromise","providedConfig","put","pnpCache","PnPClientStorage","local","session","defineProperty","../../utils/storage",37,"cachingConfigurationProvider_1","spListConfigurationProvider_1","SPListConfigurationProvider","./cachingConfigurationProvider","./spListConfigurationProvider",38,"webUrl","listTitle","getWebUrl","getListTitle","success","configuration","asCaching","../../Utils/Ajax",39,"CachedDigest","DigestCache","_httpClient","_digests","getDigest","cachedDigest","now","expiration","fetchRaw","cache","credentials","Accept","Content-type","method","newCachedDigest","FormDigestValue","seconds","FormDigestTimeoutSeconds","setTime","../utils/util",40,"FetchClient","fetch",41,"fetchClient_1","digestCache_1","_impl","_digestCache","opts","Headers","temp","Request","has","toUpperCase","substr","digest","post","./digestCache","./fetchClient",42,"SharePoint_1","Storage_1","Configuration","logging_1","PnP","util","sharepoint","logging","./SharePoint/SharePoint","./configuration/configuration","./utils/Storage","./utils/Util","./utils/logging",43,44,"PnPClientStorageWrapper","defaultTimeoutMinutes","test","getItem","persistable","expire","setItem","createPersistable","removeItem","getOrPut","getter","isFunction","str","dateAdd","localStorage","sessionStorage","./Util",45,"getCtxCallback","context","urlParamExists","regex","RegExp","search","getUrlParamByName","exec","decodeURIComponent","getUrlParamBoolByName","isFalse","stringInsert","target","date","interval","units","ret","toLocaleString","setFullYear","getFullYear","setMonth","getMonth","setDate","getDate","loadStylesheet","avoidCache","encodeURIComponent","head","getElementsByTagName","createElement","appendChild","setAttribute","paths","parts","getRandomString","chars","text","possible","charAt","Math","floor","random","getGUID","guid","c","candidateFunction","stringIsNullOrEmpty","noOverwrite","result","check","derivedCtor","baseCtors","baseCtor","getOwnPropertyNames",46,"parameterName","objectIsNull","./util",47,"Args","LogLevel","activeLogLevel","subscribers","Warning","subscribe","listener","write","level","Verbose","measure","profile","profileEnd","ConsoleListener","Info","warn","AzureInsightsListener","azureInsightsInstrumentationKey","appInsights","config","cookie","pop","disableExceptionTracking","instrumentationKey","ai","trackException","trackEvent","FunctionListener","./args",48,49],"mappings":"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","file":"pnp.min.js","sourcesContent":["(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.$pnp = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n(function (factory) {/* istanbul ignore next */\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\", \"./ProvisioningStep\", \"../ObjectHandlers/ObjectNavigation/ObjectNavigation\", \"../ObjectHandlers/ObjectPropertyBagEntries/ObjectPropertyBagEntries\", \"../ObjectHandlers/ObjectFeatures/ObjectFeatures\", \"../ObjectHandlers/ObjectWebSettings/ObjectWebSettings\", \"../ObjectHandlers/ObjectComposedLook/ObjectComposedLook\", \"../ObjectHandlers/ObjectCustomActions/ObjectCustomActions\", \"../ObjectHandlers/ObjectFiles/ObjectFiles\", \"../ObjectHandlers/ObjectLists/ObjectLists\", \"../../../sharepoint/util\", \"../Resources/Resources\", \"../Provisioning\"], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    /// <reference path=\"..\\schema\\schema.d.ts\" />\n    /// <reference path=\"iwaitmessageoptions.d.ts\" />\n    /// <reference path=\"ioptions.d.ts\" />\n    /// <reference path=\"../../../utils/util\" />\n    // import { Promise } from \"es6-promise\";\n    var ProvisioningStep_1 = require(\"./ProvisioningStep\");\n    var ObjectNavigation_1 = require(\"../ObjectHandlers/ObjectNavigation/ObjectNavigation\");\n    var ObjectPropertyBagEntries_1 = require(\"../ObjectHandlers/ObjectPropertyBagEntries/ObjectPropertyBagEntries\");\n    var ObjectFeatures_1 = require(\"../ObjectHandlers/ObjectFeatures/ObjectFeatures\");\n    var ObjectWebSettings_1 = require(\"../ObjectHandlers/ObjectWebSettings/ObjectWebSettings\");\n    var ObjectComposedLook_1 = require(\"../ObjectHandlers/ObjectComposedLook/ObjectComposedLook\");\n    var ObjectCustomActions_1 = require(\"../ObjectHandlers/ObjectCustomActions/ObjectCustomActions\");\n    var ObjectFiles_1 = require(\"../ObjectHandlers/ObjectFiles/ObjectFiles\");\n    var ObjectLists_1 = require(\"../ObjectHandlers/ObjectLists/ObjectLists\");\n    var util_1 = require(\"../../../sharepoint/util\");\n    var Resources = require(\"../Resources/Resources\");\n    var Provisioning_1 = require(\"../Provisioning\");\n    var Core = (function () {\n        function Core() {\n            this.handlers = {\n                \"Navigation\": ObjectNavigation_1.ObjectNavigation,\n                \"PropertyBagEntries\": ObjectPropertyBagEntries_1.ObjectPropertyBagEntries,\n                \"Features\": ObjectFeatures_1.ObjectFeatures,\n                \"WebSettings\": ObjectWebSettings_1.ObjectWebSettings,\n                \"ComposedLook\": ObjectComposedLook_1.ObjectComposedLook,\n                \"CustomActions\": ObjectCustomActions_1.ObjectCustomActions,\n                \"Files\": ObjectFiles_1.ObjectFiles,\n                \"Lists\": ObjectLists_1.ObjectLists,\n            };\n        }\n        Core.prototype.applyTemplate = function (path, _options) {\n            var _this = this;\n            var url = util_1.replaceUrlTokens(path);\n            this.options = _options || {};\n            return new Promise(function (resolve, reject) {\n                jQuery.getJSON(url, function (template) {\n                    _this.start(template, Object.keys(template)).then(resolve, resolve);\n                }).fail(function () {\n                    Provisioning_1.Log.error(\"Provisioning\", Resources.Template_invalid);\n                });\n            });\n        };\n        Core.prototype.start = function (json, queue) {\n            var _this = this;\n            Provisioning_1.Log.info(\"Provisioning\", Resources.Code_execution_started);\n            return new Promise(function (resolve, reject) {\n                _this.startTime = new Date().getTime();\n                _this.queueItems = [];\n                queue.forEach(function (q, index) {\n                    if (!_this.handlers[q]) {\n                        return;\n                    }\n                    _this.queueItems.push(new ProvisioningStep_1.ProvisioningStep(q, index, json[q], json.Parameters, _this.handlers[q]));\n                });\n                var promises = [];\n                promises.push(jQuery.Deferred());\n                promises[0].resolve();\n                promises[0].promise();\n                var index = 1;\n                while (_this.queueItems[index - 1] !== undefined) {\n                    var i = promises.length - 1;\n                    promises.push(_this.queueItems[index - 1].execute(promises[i]));\n                    index++;\n                }\n                ;\n                Promise.all(promises).then(function () {\n                    Provisioning_1.Log.info(\"Provisioning\", Resources.Code_execution_ended);\n                }, function () {\n                    Provisioning_1.Log.info(\"Provisioning\", Resources.Code_execution_ended);\n                });\n            });\n        };\n        return Core;\n    }());\n    exports.Core = Core;\n});\n\n},{\"../../../sharepoint/util\":43,\"../ObjectHandlers/ObjectComposedLook/ObjectComposedLook\":4,\"../ObjectHandlers/ObjectCustomActions/ObjectCustomActions\":5,\"../ObjectHandlers/ObjectFeatures/ObjectFeatures\":6,\"../ObjectHandlers/ObjectFiles/ObjectFiles\":7,\"../ObjectHandlers/ObjectLists/ObjectLists\":9,\"../ObjectHandlers/ObjectNavigation/ObjectNavigation\":10,\"../ObjectHandlers/ObjectPropertyBagEntries/ObjectPropertyBagEntries\":11,\"../ObjectHandlers/ObjectWebSettings/ObjectWebSettings\":12,\"../Provisioning\":13,\"../Resources/Resources\":14,\"./ProvisioningStep\":2}],2:[function(require,module,exports){\n(function (factory) {/* istanbul ignore next */\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\"], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    var ProvisioningStep = (function () {\n        function ProvisioningStep(name, index, objects, parameters, handler) {\n            this.name = name;\n            this.index = index;\n            this.objects = objects;\n            this.parameters = parameters;\n            this.handler = handler;\n        }\n        ProvisioningStep.prototype.execute = function (dependentPromise) {\n            var _this = this;\n            var _handler = new this.handler();\n            if (!dependentPromise) {\n                return _handler.ProvisionObjects(this.objects, this.parameters);\n            }\n            return new Promise(function (resolve, reject) {\n                dependentPromise.then(function () {\n                    return _handler.ProvisionObjects(_this.objects, _this.parameters).then(resolve, resolve);\n                });\n            });\n        };\n        return ProvisioningStep;\n    }());\n    exports.ProvisioningStep = ProvisioningStep;\n});\n\n},{}],3:[function(require,module,exports){\n(function (factory) {/* istanbul ignore next */\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\"], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    var Logger = (function () {\n        function Logger() {\n            this.isLoggerDefined = false;\n            if (console && console.log) {\n                this.isLoggerDefined = true;\n            }\n            this.spacing = \"\\t\\t\";\n            this.template = \"{0} \" + this.spacing + \" [{1}] \" + this.spacing + \" [{2}] \" + this.spacing + \" {3}\";\n        }\n        Logger.prototype.info = function (object, message) {\n            this.print(String.format(this.template, new Date(), object, \"Information\", message));\n        };\n        Logger.prototype.debug = function (object, message) {\n            this.print(String.format(this.template, new Date(), object, \"Debug\", message));\n        };\n        Logger.prototype.error = function (object, message) {\n            this.print(String.format(this.template, new Date(), object, \"Error\", message));\n        };\n        Logger.prototype.print = function (msg) {\n            if (this.isLoggerDefined) {\n                console.log(msg);\n            }\n        };\n        return Logger;\n    }());\n    exports.Logger = Logger;\n});\n\n},{}],4:[function(require,module,exports){\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\n(function (factory) {/* istanbul ignore next */\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\", \"../../../util\", \"../ObjectHandlerBase/ObjectHandlerBase\"], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    /// <reference path=\"..\\schema\\icomposedlook.d.ts\" />\n    /// <reference path=\"../../../utils/util\" />\n    var util_1 = require(\"../../../util\");\n    var ObjectHandlerBase_1 = require(\"../ObjectHandlerBase/ObjectHandlerBase\");\n    var ObjectComposedLook = (function (_super) {\n        __extends(ObjectComposedLook, _super);\n        function ObjectComposedLook() {\n            _super.call(this, \"ComposedLook\");\n        }\n        ObjectComposedLook.prototype.ProvisionObjects = function (object) {\n            var _this = this;\n            _super.prototype.scope_started.call(this);\n            return new Promise(function (resolve, reject) {\n                var clientContext = SP.ClientContext.get_current();\n                var web = clientContext.get_web();\n                var colorPaletteUrl = object.ColorPaletteUrl ? util_1.replaceUrlTokens(object.ColorPaletteUrl) : \"\";\n                var fontSchemeUrl = object.FontSchemeUrl ? util_1.replaceUrlTokens(object.FontSchemeUrl) : \"\";\n                var backgroundImageUrl = object.BackgroundImageUrl ? util_1.replaceUrlTokens(object.BackgroundImageUrl) : null;\n                web.applyTheme(util_1.getRelativeUrl(colorPaletteUrl), util_1.getRelativeUrl(fontSchemeUrl), backgroundImageUrl, true);\n                web.update();\n                clientContext.executeQueryAsync(function () {\n                    _super.prototype.scope_ended.call(_this);\n                    resolve();\n                }, function () {\n                    _super.prototype.scope_ended.call(_this);\n                    resolve();\n                });\n            });\n        };\n        return ObjectComposedLook;\n    }(ObjectHandlerBase_1.ObjectHandlerBase));\n    exports.ObjectComposedLook = ObjectComposedLook;\n});\n\n},{\"../../../util\":32,\"../ObjectHandlerBase/ObjectHandlerBase\":8}],5:[function(require,module,exports){\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\n(function (factory) {/* istanbul ignore next */\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\", \"../ObjectHandlerBase/ObjectHandlerBase\"], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    /// <reference path=\"..\\schema\\icustomaction.d.ts\" />\n    // import { Promise } from \"es6-promise\";\n    var ObjectHandlerBase_1 = require(\"../ObjectHandlerBase/ObjectHandlerBase\");\n    var ObjectCustomActions = (function (_super) {\n        __extends(ObjectCustomActions, _super);\n        function ObjectCustomActions() {\n            _super.call(this, \"CustomActions\");\n        }\n        ObjectCustomActions.prototype.ProvisionObjects = function (customactions) {\n            var _this = this;\n            _super.prototype.scope_started.call(this);\n            return new Promise(function (resolve, reject) {\n                var clientContext = SP.ClientContext.get_current();\n                var userCustomActions = clientContext.get_web().get_userCustomActions();\n                clientContext.load(userCustomActions);\n                clientContext.executeQueryAsync(function () {\n                    customactions.forEach(function (obj) {\n                        var objExists = jQuery.grep(userCustomActions.get_data(), function (userCustomAction) {\n                            return userCustomAction.get_title() === obj.Title;\n                        }).length > 0;\n                        if (!objExists) {\n                            var objCreationInformation = userCustomActions.add();\n                            if (obj.Description) {\n                                objCreationInformation.set_description(obj.Description);\n                            }\n                            if (obj.CommandUIExtension) {\n                                objCreationInformation.set_commandUIExtension(obj.CommandUIExtension);\n                            }\n                            if (obj.Group) {\n                                objCreationInformation.set_group(obj.Group);\n                            }\n                            if (obj.Title) {\n                                objCreationInformation.set_title(obj.Title);\n                            }\n                            if (obj.Url) {\n                                objCreationInformation.set_url(obj.Url);\n                            }\n                            if (obj.ScriptBlock) {\n                                objCreationInformation.set_scriptBlock(obj.ScriptBlock);\n                            }\n                            if (obj.ScriptSrc) {\n                                objCreationInformation.set_scriptSrc(obj.ScriptSrc);\n                            }\n                            if (obj.Location) {\n                                objCreationInformation.set_location(obj.Location);\n                            }\n                            if (obj.ImageUrl) {\n                                objCreationInformation.set_imageUrl(obj.ImageUrl);\n                            }\n                            if (obj.Name) {\n                                objCreationInformation.set_name(obj.Name);\n                            }\n                            if (obj.RegistrationId) {\n                                objCreationInformation.set_registrationId(obj.RegistrationId);\n                            }\n                            if (obj.RegistrationType) {\n                                objCreationInformation.set_registrationType(obj.RegistrationType);\n                            }\n                            if (obj.Rights) {\n                                objCreationInformation.set_rights(obj.Rights);\n                            }\n                            if (obj.Sequence) {\n                                objCreationInformation.set_sequence(obj.Sequence);\n                            }\n                            objCreationInformation.update();\n                        }\n                    });\n                    clientContext.executeQueryAsync(function () {\n                        _super.prototype.scope_ended.call(_this);\n                        resolve();\n                    }, function () {\n                        _super.prototype.scope_ended.call(_this);\n                        resolve();\n                    });\n                }, function () {\n                    _super.prototype.scope_ended.call(_this);\n                    resolve();\n                });\n            });\n        };\n        return ObjectCustomActions;\n    }(ObjectHandlerBase_1.ObjectHandlerBase));\n    exports.ObjectCustomActions = ObjectCustomActions;\n});\n\n},{\"../ObjectHandlerBase/ObjectHandlerBase\":8}],6:[function(require,module,exports){\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\n(function (factory) {/* istanbul ignore next */\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\", \"../ObjectHandlerBase/ObjectHandlerBase\"], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    /// <reference path=\"..\\schema\\ifeature.d.ts\" />\n    // import { Promise } from \"es6-promise\";\n    var ObjectHandlerBase_1 = require(\"../ObjectHandlerBase/ObjectHandlerBase\");\n    var ObjectFeatures = (function (_super) {\n        __extends(ObjectFeatures, _super);\n        function ObjectFeatures() {\n            _super.call(this, \"Features\");\n        }\n        ObjectFeatures.prototype.ProvisionObjects = function (features) {\n            var _this = this;\n            _super.prototype.scope_started.call(this);\n            return new Promise(function (resolve, reject) {\n                var clientContext = SP.ClientContext.get_current();\n                var web = clientContext.get_web();\n                var webFeatures = web.get_features();\n                features.forEach(function (f) {\n                    if (f.Deactivate === true) {\n                        webFeatures.remove(new SP.Guid(f.ID), true);\n                    }\n                    else {\n                        webFeatures.add(new SP.Guid(f.ID), true, SP.FeatureDefinitionScope.none);\n                    }\n                });\n                web.update();\n                clientContext.load(webFeatures);\n                clientContext.executeQueryAsync(function () {\n                    _super.prototype.scope_ended.call(_this);\n                    resolve();\n                }, function () {\n                    _super.prototype.scope_ended.call(_this);\n                    resolve();\n                });\n            });\n        };\n        return ObjectFeatures;\n    }(ObjectHandlerBase_1.ObjectHandlerBase));\n    exports.ObjectFeatures = ObjectFeatures;\n});\n\n},{\"../ObjectHandlerBase/ObjectHandlerBase\":8}],7:[function(require,module,exports){\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\n(function (factory) {/* istanbul ignore next */\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\", \"../../../../sharepoint/util\", \"../ObjectHandlerBase/ObjectHandlerBase\"], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    /// <reference path=\"..\\schema\\ifile.d.ts\" />\n    // import { Promise } from \"es6-promise\";\n    /// <reference path=\"../../../utils/util\" />\n    var util_1 = require(\"../../../../sharepoint/util\");\n    var ObjectHandlerBase_1 = require(\"../ObjectHandlerBase/ObjectHandlerBase\");\n    var ObjectFiles = (function (_super) {\n        __extends(ObjectFiles, _super);\n        function ObjectFiles() {\n            _super.call(this, \"Files\");\n        }\n        ObjectFiles.prototype.ProvisionObjects = function (objects) {\n            var _this = this;\n            _super.prototype.scope_started.call(this);\n            return new Promise(function (resolve, reject) {\n                var clientContext = SP.ClientContext.get_current();\n                var web = clientContext.get_web();\n                var fileInfos = [];\n                var promises = [];\n                objects.forEach(function (obj, index) {\n                    var filename = _this.GetFilenameFromFilePath(obj.Dest);\n                    var webServerRelativeUrl = _spPageContextInfo.webServerRelativeUrl;\n                    var folder = web.getFolderByServerRelativeUrl(webServerRelativeUrl + \"/\" + _this.GetFolderFromFilePath(obj.Dest));\n                    promises.push(jQuery.get(util_1.replaceUrlTokens(obj.Src), function (fileContents) {\n                        var f = {};\n                        jQuery.extend(f, obj, { \"Filename\": filename, \"Folder\": folder, \"Contents\": fileContents });\n                        fileInfos.push(f);\n                    }));\n                });\n                jQuery.when.apply(jQuery, promises).done(function () {\n                    fileInfos.forEach(function (f, index) {\n                        if (f.Filename.indexOf(\"Form.aspx\") !== -1) {\n                            return;\n                        }\n                        var objCreationInformation = new SP.FileCreationInformation();\n                        objCreationInformation.set_overwrite(f.Overwrite !== undefined ? f.Overwrite : false);\n                        objCreationInformation.set_url(f.Filename);\n                        objCreationInformation.set_content(new SP.Base64EncodedByteArray());\n                        for (var i = 0; i < f.Contents.length; i++) {\n                            objCreationInformation.get_content().append(f.Contents.charCodeAt(i));\n                        }\n                        clientContext.load(f.Folder.get_files().add(objCreationInformation));\n                    });\n                    clientContext.executeQueryAsync(function () {\n                        promises = [];\n                        objects.forEach(function (obj) {\n                            if (obj.Properties && Object.keys(obj.Properties).length > 0) {\n                                promises.push(_this.ApplyFileProperties(obj.Dest, obj.Properties));\n                            }\n                            if (obj.WebParts && obj.WebParts.length > 0) {\n                                promises.push(_this.AddWebPartsToWebPartPage(obj.Dest, obj.Src, obj.WebParts, obj.RemoveExistingWebParts));\n                            }\n                        });\n                        Promise.all(promises).then(function () {\n                            _this.ModifyHiddenViews(objects).then(function () {\n                                _super.prototype.scope_ended.call(_this);\n                                resolve();\n                            }, function () {\n                                _super.prototype.scope_ended.call(_this);\n                                resolve();\n                            });\n                        });\n                    }, function () {\n                        _super.prototype.scope_ended.call(_this);\n                        resolve();\n                    });\n                });\n            });\n        };\n        ObjectFiles.prototype.RemoveWebPartsFromFileIfSpecified = function (clientContext, limitedWebPartManager, shouldRemoveExisting) {\n            return new Promise(function (resolve, reject) {\n                if (!shouldRemoveExisting) {\n                    resolve();\n                }\n                var existingWebParts = limitedWebPartManager.get_webParts();\n                clientContext.load(existingWebParts);\n                clientContext.executeQueryAsync(function () {\n                    existingWebParts.get_data().forEach(function (wp) {\n                        wp.deleteWebPart();\n                    });\n                    clientContext.load(existingWebParts);\n                    clientContext.executeQueryAsync(resolve, resolve);\n                }, resolve);\n            });\n        };\n        ObjectFiles.prototype.GetWebPartXml = function (webParts) {\n            return new Promise(function (resolve, reject) {\n                var promises = [];\n                webParts.forEach(function (wp, index) {\n                    if (wp.Contents.FileUrl) {\n                        promises.push((function () {\n                            return new Promise(function (res, rej) {\n                                var fileUrl = util_1.replaceUrlTokens(wp.Contents.FileUrl);\n                                jQuery.get(fileUrl, function (xml) {\n                                    webParts[index].Contents.Xml = xml;\n                                    res();\n                                }).fail(rej);\n                            });\n                        })());\n                    }\n                });\n                Promise.all(promises).then(function () {\n                    resolve(webParts);\n                });\n            });\n        };\n        ObjectFiles.prototype.AddWebPartsToWebPartPage = function (dest, src, webParts, shouldRemoveExisting) {\n            var _this = this;\n            return new Promise(function (resolve, reject) {\n                var clientContext = SP.ClientContext.get_current();\n                var web = clientContext.get_web();\n                var fileServerRelativeUrl = _spPageContextInfo.webServerRelativeUrl + \"/\" + dest;\n                var file = web.getFileByServerRelativeUrl(fileServerRelativeUrl);\n                clientContext.load(file);\n                clientContext.executeQueryAsync(function () {\n                    var limitedWebPartManager = file.getLimitedWebPartManager(SP.WebParts.PersonalizationScope.shared);\n                    _this.RemoveWebPartsFromFileIfSpecified(clientContext, limitedWebPartManager, shouldRemoveExisting).then(function () {\n                        _this.GetWebPartXml(webParts).then(function (webPartsWithXml) {\n                            webPartsWithXml.forEach(function (wp) {\n                                if (!wp.Contents.Xml) {\n                                    return;\n                                }\n                                var oWebPartDefinition = limitedWebPartManager.importWebPart(util_1.replaceUrlTokens(wp.Contents.Xml));\n                                var oWebPart = oWebPartDefinition.get_webPart();\n                                limitedWebPartManager.addWebPart(oWebPart, wp.Zone, wp.Order);\n                            });\n                            clientContext.executeQueryAsync(resolve, resolve);\n                        });\n                    });\n                }, resolve);\n            });\n        };\n        ObjectFiles.prototype.ApplyFileProperties = function (dest, fileProperties) {\n            return new Promise(function (resolve, reject) {\n                var clientContext = SP.ClientContext.get_current();\n                var web = clientContext.get_web();\n                var fileServerRelativeUrl = _spPageContextInfo.webServerRelativeUrl + \"/\" + dest;\n                var file = web.getFileByServerRelativeUrl(fileServerRelativeUrl);\n                var listItemAllFields = file.get_listItemAllFields();\n                Object.keys(fileProperties).forEach(function (key) {\n                    listItemAllFields.set_item(key, fileProperties[key]);\n                });\n                listItemAllFields.update();\n                clientContext.executeQueryAsync(resolve, resolve);\n            });\n        };\n        ObjectFiles.prototype.GetViewFromCollectionByUrl = function (viewCollection, url) {\n            var serverRelativeUrl = _spPageContextInfo.webServerRelativeUrl + \"/\" + url;\n            var viewCollectionEnumerator = viewCollection.getEnumerator();\n            while (viewCollectionEnumerator.moveNext()) {\n                var view = viewCollectionEnumerator.get_current();\n                if (view.get_serverRelativeUrl().toString().toLowerCase() === serverRelativeUrl.toLowerCase()) {\n                    return view;\n                }\n            }\n            return null;\n        };\n        ObjectFiles.prototype.ModifyHiddenViews = function (objects) {\n            var _this = this;\n            return new Promise(function (resolve, reject) {\n                var clientContext = SP.ClientContext.get_current();\n                var web = clientContext.get_web();\n                var mapping = {};\n                var lists = [];\n                var listViewCollections = [];\n                objects.forEach(function (obj) {\n                    if (!obj.Views) {\n                        return;\n                    }\n                    obj.Views.forEach(function (v) {\n                        mapping[v.List] = mapping[v.List] || [];\n                        mapping[v.List].push(jQuery.extend(v, { \"Url\": obj.Dest }));\n                    });\n                });\n                Object.keys(mapping).forEach(function (l, index) {\n                    lists.push(web.get_lists().getByTitle(l));\n                    listViewCollections.push(web.get_lists().getByTitle(l).get_views());\n                    clientContext.load(lists[index]);\n                    clientContext.load(listViewCollections[index]);\n                });\n                clientContext.executeQueryAsync(function () {\n                    Object.keys(mapping).forEach(function (l, index) {\n                        var views = mapping[l];\n                        var list = lists[index];\n                        var viewCollection = listViewCollections[index];\n                        views.forEach(function (v) {\n                            var view = _this.GetViewFromCollectionByUrl(viewCollection, v.Url);\n                            if (view == null) {\n                                return;\n                            }\n                            if (v.Paged) {\n                                view.set_paged(v.Paged);\n                            }\n                            if (v.Query) {\n                                view.set_viewQuery(v.Query);\n                            }\n                            if (v.RowLimit) {\n                                view.set_rowLimit(v.RowLimit);\n                            }\n                            if (v.ViewFields && v.ViewFields.length > 0) {\n                                var columns_1 = view.get_viewFields();\n                                columns_1.removeAll();\n                                v.ViewFields.forEach(function (vf) {\n                                    columns_1.add(vf);\n                                });\n                            }\n                            view.update();\n                        });\n                        clientContext.load(viewCollection);\n                        list.update();\n                    });\n                    clientContext.executeQueryAsync(resolve, resolve);\n                }, resolve);\n            });\n        };\n        ObjectFiles.prototype.GetFolderFromFilePath = function (filePath) {\n            var split = filePath.split(\"/\");\n            return split.splice(0, split.length - 1).join(\"/\");\n        };\n        ObjectFiles.prototype.GetFilenameFromFilePath = function (filePath) {\n            var split = filePath.split(\"/\");\n            return split[split.length - 1];\n        };\n        return ObjectFiles;\n    }(ObjectHandlerBase_1.ObjectHandlerBase));\n    exports.ObjectFiles = ObjectFiles;\n    ;\n});\n\n},{\"../../../../sharepoint/util\":43,\"../ObjectHandlerBase/ObjectHandlerBase\":8}],8:[function(require,module,exports){\n(function (factory) {/* istanbul ignore next */\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\", \"../../Resources/Resources\", \"../../Provisioning\"], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    // import { Promise } from \"es6-promise\";\n    var Resources = require(\"../../Resources/Resources\");\n    var Provisioning_1 = require(\"../../Provisioning\");\n    var ObjectHandlerBase = (function () {\n        function ObjectHandlerBase(name) {\n            this.name = name;\n        }\n        ObjectHandlerBase.prototype.ProvisionObjects = function (objects, parameters) {\n            return new Promise(function (resolve, reject) { resolve(\"Not implemented.\"); });\n        };\n        ObjectHandlerBase.prototype.scope_started = function () {\n            Provisioning_1.Log.info(this.name, Resources.Code_execution_started);\n        };\n        ObjectHandlerBase.prototype.scope_ended = function () {\n            Provisioning_1.Log.info(this.name, Resources.Code_execution_ended);\n        };\n        return ObjectHandlerBase;\n    }());\n    exports.ObjectHandlerBase = ObjectHandlerBase;\n});\n\n},{\"../../Provisioning\":13,\"../../Resources/Resources\":14}],9:[function(require,module,exports){\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\n(function (factory) {/* istanbul ignore next */\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\", \"../../Sequencer/Sequencer\", \"../ObjectHandlerBase/ObjectHandlerBase\"], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    /// <reference path=\"..\\schema\\ilistinstance.d.ts\" />\n    // import { Promise } from \"es6-promise\";\n    var Sequencer_1 = require(\"../../Sequencer/Sequencer\");\n    var ObjectHandlerBase_1 = require(\"../ObjectHandlerBase/ObjectHandlerBase\");\n    var ObjectLists = (function (_super) {\n        __extends(ObjectLists, _super);\n        function ObjectLists() {\n            _super.call(this, \"Lists\");\n        }\n        ObjectLists.prototype.ProvisionObjects = function (objects) {\n            var _this = this;\n            _super.prototype.scope_started.call(this);\n            return new Promise(function (resolve, reject) {\n                var clientContext = SP.ClientContext.get_current();\n                var lists = clientContext.get_web().get_lists();\n                var listInstances = [];\n                clientContext.load(lists);\n                clientContext.executeQueryAsync(function () {\n                    objects.forEach(function (obj, index) {\n                        var existingObj = jQuery.grep(lists.get_data(), function (list) {\n                            return list.get_title() === obj.Title;\n                        })[0];\n                        if (existingObj) {\n                            if (obj.Description) {\n                                existingObj.set_description(obj.Description);\n                            }\n                            if (obj.EnableVersioning !== undefined) {\n                                existingObj.set_enableVersioning(obj.EnableVersioning);\n                            }\n                            if (obj.EnableMinorVersions !== undefined) {\n                                existingObj.set_enableMinorVersions(obj.EnableMinorVersions);\n                            }\n                            if (obj.EnableModeration !== undefined) {\n                                existingObj.set_enableModeration(obj.EnableModeration);\n                            }\n                            if (obj.EnableFolderCreation !== undefined) {\n                                existingObj.set_enableFolderCreation(obj.EnableFolderCreation);\n                            }\n                            if (obj.EnableAttachments !== undefined) {\n                                existingObj.set_enableAttachments(obj.EnableAttachments);\n                            }\n                            if (obj.NoCrawl !== undefined) {\n                                existingObj.set_noCrawl(obj.NoCrawl);\n                            }\n                            if (obj.DefaultDisplayFormUrl) {\n                                existingObj.set_defaultDisplayFormUrl(obj.DefaultDisplayFormUrl);\n                            }\n                            if (obj.DefaultEditFormUrl) {\n                                existingObj.set_defaultEditFormUrl(obj.DefaultEditFormUrl);\n                            }\n                            if (obj.DefaultNewFormUrl) {\n                                existingObj.set_defaultNewFormUrl(obj.DefaultNewFormUrl);\n                            }\n                            if (obj.DraftVersionVisibility) {\n                                existingObj.set_draftVersionVisibility(SP.DraftVisibilityType[obj.DraftVersionVisibility]);\n                            }\n                            if (obj.ImageUrl) {\n                                existingObj.set_imageUrl(obj.ImageUrl);\n                            }\n                            if (obj.Hidden !== undefined) {\n                                existingObj.set_hidden(obj.Hidden);\n                            }\n                            if (obj.ForceCheckout !== undefined) {\n                                existingObj.set_forceCheckout(obj.ForceCheckout);\n                            }\n                            existingObj.update();\n                            listInstances.push(existingObj);\n                            clientContext.load(listInstances[index]);\n                        }\n                        else {\n                            var objCreationInformation = new SP.ListCreationInformation();\n                            if (obj.Description) {\n                                objCreationInformation.set_description(obj.Description);\n                            }\n                            if (obj.OnQuickLaunch !== undefined) {\n                                var value = obj.OnQuickLaunch ? SP.QuickLaunchOptions.on : SP.QuickLaunchOptions.off;\n                                objCreationInformation.set_quickLaunchOption(value);\n                            }\n                            if (obj.TemplateType) {\n                                objCreationInformation.set_templateType(obj.TemplateType);\n                            }\n                            if (obj.Title) {\n                                objCreationInformation.set_title(obj.Title);\n                            }\n                            if (obj.Url) {\n                                objCreationInformation.set_url(obj.Url);\n                            }\n                            var createdList = lists.add(objCreationInformation);\n                            if (obj.EnableVersioning !== undefined) {\n                                createdList.set_enableVersioning(obj.EnableVersioning);\n                            }\n                            if (obj.EnableMinorVersions !== undefined) {\n                                createdList.set_enableMinorVersions(obj.EnableMinorVersions);\n                            }\n                            if (obj.EnableModeration !== undefined) {\n                                createdList.set_enableModeration(obj.EnableModeration);\n                            }\n                            if (obj.EnableFolderCreation !== undefined) {\n                                createdList.set_enableFolderCreation(obj.EnableFolderCreation);\n                            }\n                            if (obj.EnableAttachments !== undefined) {\n                                createdList.set_enableAttachments(obj.EnableAttachments);\n                            }\n                            if (obj.NoCrawl !== undefined) {\n                                createdList.set_noCrawl(obj.NoCrawl);\n                            }\n                            if (obj.DefaultDisplayFormUrl) {\n                                createdList.set_defaultDisplayFormUrl(obj.DefaultDisplayFormUrl);\n                            }\n                            if (obj.DefaultEditFormUrl) {\n                                createdList.set_defaultEditFormUrl(obj.DefaultEditFormUrl);\n                            }\n                            if (obj.DefaultNewFormUrl) {\n                                createdList.set_defaultNewFormUrl(obj.DefaultNewFormUrl);\n                            }\n                            if (obj.DraftVersionVisibility) {\n                                var value = SP.DraftVisibilityType[obj.DraftVersionVisibility.toLocaleLowerCase()];\n                                createdList.set_draftVersionVisibility(value);\n                            }\n                            if (obj.ImageUrl) {\n                                createdList.set_imageUrl(obj.ImageUrl);\n                            }\n                            if (obj.Hidden !== undefined) {\n                                createdList.set_hidden(obj.Hidden);\n                            }\n                            if (obj.ForceCheckout !== undefined) {\n                                createdList.set_forceCheckout(obj.ForceCheckout);\n                            }\n                            listInstances.push(createdList);\n                            clientContext.load(listInstances[index]);\n                        }\n                    });\n                    clientContext.executeQueryAsync(function () {\n                        var sequencer = new Sequencer_1.Sequencer([\n                            _this.ApplyContentTypeBindings,\n                            _this.ApplyListInstanceFieldRefs,\n                            _this.ApplyFields,\n                            _this.ApplyLookupFields,\n                            _this.ApplyListSecurity,\n                            _this.CreateViews,\n                            _this.InsertDataRows,\n                            _this.CreateFolders,\n                        ], { ClientContext: clientContext, ListInstances: listInstances, Objects: objects }, _this);\n                        sequencer.execute().then(function () {\n                            _super.prototype.scope_ended.call(_this);\n                            resolve();\n                        });\n                    }, function () {\n                        _super.prototype.scope_ended.call(_this);\n                        resolve();\n                    });\n                }, function () {\n                    _super.prototype.scope_ended.call(_this);\n                    resolve();\n                });\n            });\n        };\n        ObjectLists.prototype.EnsureLocationBasedMetadataDefaultsReceiver = function (clientContext, list) {\n            var eventReceivers = list.get_eventReceivers();\n            var eventRecCreationInfo = new SP.EventReceiverDefinitionCreationInformation();\n            eventRecCreationInfo.set_receiverName(\"LocationBasedMetadataDefaultsReceiver ItemAdded\");\n            eventRecCreationInfo.set_synchronization(1);\n            eventRecCreationInfo.set_sequenceNumber(1000);\n            eventRecCreationInfo.set_receiverAssembly(\"Microsoft.Office.DocumentManagement, Version=15.0.0.0, Culture=neutral, \" +\n                \"PublicKeyToken=71e9bce111e9429c\");\n            eventRecCreationInfo.set_receiverClass(\"Microsoft.Office.DocumentManagement.LocationBasedMetadataDefaultsReceiver\");\n            eventRecCreationInfo.set_eventType(SP.EventReceiverType.itemAdded);\n            eventReceivers.add(eventRecCreationInfo);\n            list.update();\n        };\n        ObjectLists.prototype.CreateFolders = function (params) {\n            var _this = this;\n            return new Promise(function (resolve, reject) {\n                params.ListInstances.forEach(function (l, index) {\n                    var obj = params.Objects[index];\n                    if (!obj.Folders) {\n                        return;\n                    }\n                    var folderServerRelativeUrl = _spPageContextInfo.webServerRelativeUrl + \"/\" + obj.Url;\n                    var rootFolder = l.get_rootFolder();\n                    var metadataDefaults = \"<MetadataDefaults>\";\n                    var setMetadataDefaults = false;\n                    obj.Folders.forEach(function (f) {\n                        var folderUrl = folderServerRelativeUrl + \"/\" + f.Name;\n                        rootFolder.get_folders().add(folderUrl);\n                        if (f.DefaultValues) {\n                            var keys = Object.keys(f.DefaultValues).length;\n                            if (keys > 0) {\n                                metadataDefaults += \"<a href='\" + folderUrl + \"'>\";\n                                Object.keys(f.DefaultValues).forEach(function (key) {\n                                    metadataDefaults += \"<DefaultValue FieldName=\\\"\" + key + \"\\\">\" + f.DefaultValues[key] + \"</DefaultValue>\";\n                                });\n                                metadataDefaults += \"</a>\";\n                            }\n                            setMetadataDefaults = true;\n                        }\n                    });\n                    metadataDefaults += \"</MetadataDefaults>\";\n                    if (setMetadataDefaults) {\n                        var metadataDefaultsFileCreateInfo = new SP.FileCreationInformation();\n                        metadataDefaultsFileCreateInfo.set_url(folderServerRelativeUrl + \"/Forms/client_LocationBasedDefaults.html\");\n                        metadataDefaultsFileCreateInfo.set_content(new SP.Base64EncodedByteArray());\n                        metadataDefaultsFileCreateInfo.set_overwrite(true);\n                        for (var i = 0; i < metadataDefaults.length; i++) {\n                            metadataDefaultsFileCreateInfo.get_content().append(metadataDefaults.charCodeAt(i));\n                        }\n                        rootFolder.get_files().add(metadataDefaultsFileCreateInfo);\n                        _this.EnsureLocationBasedMetadataDefaultsReceiver(params.ClientContext, l);\n                    }\n                });\n                params.ClientContext.executeQueryAsync(resolve, resolve);\n            });\n        };\n        ObjectLists.prototype.ApplyContentTypeBindings = function (params) {\n            return new Promise(function (resolve, reject) {\n                var webCts = params.ClientContext.get_site().get_rootWeb().get_contentTypes();\n                var listCts = [];\n                params.ListInstances.forEach(function (l, index) {\n                    listCts.push(l.get_contentTypes());\n                    params.ClientContext.load(listCts[index], \"Include(Name,Id)\");\n                    if (params.Objects[index].ContentTypeBindings) {\n                        l.set_contentTypesEnabled(true);\n                        l.update();\n                    }\n                });\n                params.ClientContext.load(webCts);\n                params.ClientContext.executeQueryAsync(function () {\n                    params.ListInstances.forEach(function (list, index) {\n                        var obj = params.Objects[index];\n                        if (!obj.ContentTypeBindings) {\n                            return;\n                        }\n                        var listContentTypes = listCts[index];\n                        var existingContentTypes = new Array();\n                        if (obj.RemoveExistingContentTypes && obj.ContentTypeBindings.length > 0) {\n                            listContentTypes.get_data().forEach(function (ct) {\n                                existingContentTypes.push(ct);\n                            });\n                        }\n                        obj.ContentTypeBindings.forEach(function (ctb) {\n                            listContentTypes.addExistingContentType(webCts.getById(ctb.ContentTypeId));\n                        });\n                        if (obj.RemoveExistingContentTypes && obj.ContentTypeBindings.length > 0) {\n                            for (var j = 0; j < existingContentTypes.length; j++) {\n                                var ect = existingContentTypes[j];\n                                ect.deleteObject();\n                            }\n                        }\n                        list.update();\n                    });\n                    params.ClientContext.executeQueryAsync(resolve, resolve);\n                }, resolve);\n            });\n        };\n        ObjectLists.prototype.ApplyListInstanceFieldRefs = function (params) {\n            return new Promise(function (resolve, reject) {\n                var siteFields = params.ClientContext.get_site().get_rootWeb().get_fields();\n                params.ListInstances.forEach(function (l, index) {\n                    var obj = params.Objects[index];\n                    if (obj.FieldRefs) {\n                        obj.FieldRefs.forEach(function (fr) {\n                            var field = siteFields.getByInternalNameOrTitle(fr.Name);\n                            l.get_fields().add(field);\n                        });\n                        l.update();\n                    }\n                });\n                params.ClientContext.executeQueryAsync(resolve, resolve);\n            });\n        };\n        ObjectLists.prototype.ApplyFields = function (params) {\n            var _this = this;\n            return new Promise(function (resolve, reject) {\n                params.ListInstances.forEach(function (l, index) {\n                    var obj = params.Objects[index];\n                    if (obj.Fields) {\n                        obj.Fields.forEach(function (f) {\n                            var fieldXml = _this.GetFieldXml(f, params.ListInstances, l);\n                            var fieldType = _this.GetFieldXmlAttr(fieldXml, \"Type\");\n                            if (fieldType !== \"Lookup\" && fieldType !== \"LookupMulti\") {\n                                l.get_fields().addFieldAsXml(fieldXml, true, SP.AddFieldOptions.addToAllContentTypes);\n                            }\n                        });\n                        l.update();\n                    }\n                });\n                params.ClientContext.executeQueryAsync(resolve, resolve);\n            });\n        };\n        ObjectLists.prototype.ApplyLookupFields = function (params) {\n            var _this = this;\n            return new Promise(function (resolve, reject) {\n                params.ListInstances.forEach(function (l, index) {\n                    var obj = params.Objects[index];\n                    if (obj.Fields) {\n                        obj.Fields.forEach(function (f) {\n                            var fieldXml = _this.GetFieldXml(f, params.ListInstances, l);\n                            if (!fieldXml) {\n                                return;\n                            }\n                            var fieldType = _this.GetFieldXmlAttr(fieldXml, \"Type\");\n                            if (fieldType === \"Lookup\" || fieldType === \"LookupMulti\") {\n                                l.get_fields().addFieldAsXml(fieldXml, true, SP.AddFieldOptions.addToAllContentTypes);\n                            }\n                        });\n                        l.update();\n                    }\n                });\n                params.ClientContext.executeQueryAsync(resolve, resolve);\n            });\n        };\n        ObjectLists.prototype.GetFieldXmlAttr = function (fieldXml, attr) {\n            return jQuery(jQuery.parseXML(fieldXml)).find(\"Field\").attr(attr);\n        };\n        ObjectLists.prototype.GetFieldXml = function (field, lists, list) {\n            var fieldXml = \"\";\n            if (!field.SchemaXml) {\n                var properties_1 = [];\n                Object.keys(field).forEach(function (prop) {\n                    var value = field[prop];\n                    if (prop === \"List\") {\n                        var targetList = jQuery.grep(lists, function (v) {\n                            return v.get_title() === value;\n                        });\n                        if (targetList.length > 0) {\n                            value = \"{\" + targetList[0].get_id().toString() + \"}\";\n                        }\n                        else {\n                            return null;\n                        }\n                        properties_1.push(prop + \"=\\\"\" + value + \"\\\"\");\n                    }\n                });\n                fieldXml = \"<Field \" + properties_1.join(\" \") + \">\";\n                if (field.Type === \"Calculated\") {\n                    fieldXml += \"<Formula>\" + field.Formula + \"</Formula>\";\n                }\n                fieldXml += \"</Field>\";\n            }\n            return fieldXml;\n        };\n        ObjectLists.prototype.ApplyListSecurity = function (params) {\n            return new Promise(function (resolve, reject) {\n                params.ListInstances.forEach(function (l, index) {\n                    var obj = params.Objects[index];\n                    if (!obj.Security) {\n                        return;\n                    }\n                    if (obj.Security.BreakRoleInheritance) {\n                        l.breakRoleInheritance(obj.Security.CopyRoleAssignments, obj.Security.ClearSubscopes);\n                        l.update();\n                        params.ClientContext.load(l.get_roleAssignments());\n                    }\n                });\n                var web = params.ClientContext.get_web();\n                var allProperties = web.get_allProperties();\n                var siteGroups = web.get_siteGroups();\n                var roleDefinitions = web.get_roleDefinitions();\n                params.ClientContext.load(allProperties);\n                params.ClientContext.load(roleDefinitions);\n                params.ClientContext.executeQueryAsync(function () {\n                    params.ListInstances.forEach(function (l, index) {\n                        var obj = params.Objects[index];\n                        if (!obj.Security) {\n                            return;\n                        }\n                        obj.Security.RoleAssignments.forEach(function (ra) {\n                            var roleDef = null;\n                            if (typeof ra.RoleDefinition === \"number\") {\n                                roleDef = roleDefinitions.getById(ra.RoleDefinition);\n                            }\n                            else {\n                                roleDef = roleDefinitions.getByName(ra.RoleDefinition);\n                            }\n                            var roleBindings = SP.RoleDefinitionBindingCollection.newObject(params.ClientContext);\n                            roleBindings.add(roleDef);\n                            var principal = null;\n                            if (ra.Principal.match(/\\{[A-Za-z]*\\}+/g)) {\n                                var token = ra.Principal.substring(1, ra.Principal.length - 1);\n                                var groupId = allProperties.get_fieldValues()[(\"vti_\" + token)];\n                                principal = siteGroups.getById(groupId);\n                            }\n                            else {\n                                principal = siteGroups.getByName(principal);\n                            }\n                            l.get_roleAssignments().add(principal, roleBindings);\n                        });\n                        l.update();\n                    });\n                    params.ClientContext.executeQueryAsync(resolve, resolve);\n                }, resolve);\n            });\n        };\n        ObjectLists.prototype.CreateViews = function (params) {\n            return new Promise(function (resolve, reject) {\n                var listViewCollections = [];\n                params.ListInstances.forEach(function (l, index) {\n                    listViewCollections.push(l.get_views());\n                    params.ClientContext.load(listViewCollections[index]);\n                });\n                params.ClientContext.executeQueryAsync(function () {\n                    params.ListInstances.forEach(function (l, index) {\n                        var obj = params.Objects[index];\n                        if (!obj.Views) {\n                            return;\n                        }\n                        listViewCollections.push(l.get_views());\n                        params.ClientContext.load(listViewCollections[index]);\n                        obj.Views.forEach(function (v) {\n                            var viewExists = jQuery.grep(listViewCollections[index].get_data(), function (ev) {\n                                if (obj.RemoveExistingViews && obj.Views.length > 0) {\n                                    ev.deleteObject();\n                                    return false;\n                                }\n                                return ev.get_title() === v.Title;\n                            }).length > 0;\n                            if (viewExists) {\n                                var view = listViewCollections[index].getByTitle(v.Title);\n                                if (v.Paged) {\n                                    view.set_paged(v.Paged);\n                                }\n                                if (v.Query) {\n                                    view.set_viewQuery(v.Query);\n                                }\n                                if (v.RowLimit) {\n                                    view.set_rowLimit(v.RowLimit);\n                                }\n                                if (v.ViewFields && v.ViewFields.length > 0) {\n                                    var columns_1 = view.get_viewFields();\n                                    columns_1.removeAll();\n                                    v.ViewFields.forEach(function (vf) {\n                                        columns_1.add(vf);\n                                    });\n                                }\n                                if (v.Scope) {\n                                    view.set_scope(v.Scope);\n                                }\n                                view.update();\n                            }\n                            else {\n                                var viewCreationInformation = new SP.ViewCreationInformation();\n                                if (v.Title) {\n                                    viewCreationInformation.set_title(v.Title);\n                                }\n                                if (v.PersonalView) {\n                                    viewCreationInformation.set_personalView(v.PersonalView);\n                                }\n                                if (v.Paged) {\n                                    viewCreationInformation.set_paged(v.Paged);\n                                }\n                                if (v.Query) {\n                                    viewCreationInformation.set_query(v.Query);\n                                }\n                                if (v.RowLimit) {\n                                    viewCreationInformation.set_rowLimit(v.RowLimit);\n                                }\n                                if (v.SetAsDefaultView) {\n                                    viewCreationInformation.set_setAsDefaultView(v.SetAsDefaultView);\n                                }\n                                if (v.ViewFields) {\n                                    viewCreationInformation.set_viewFields(v.ViewFields);\n                                }\n                                if (v.ViewTypeKind) {\n                                    viewCreationInformation.set_viewTypeKind(SP.ViewType.html);\n                                }\n                                var view = l.get_views().add(viewCreationInformation);\n                                if (v.Scope) {\n                                    view.set_scope(v.Scope);\n                                    view.update();\n                                }\n                                l.update();\n                            }\n                            params.ClientContext.load(l.get_views());\n                        });\n                    });\n                    params.ClientContext.executeQueryAsync(resolve, resolve);\n                }, resolve);\n            });\n        };\n        ObjectLists.prototype.InsertDataRows = function (params) {\n            return new Promise(function (resolve, reject) {\n                params.ListInstances.forEach(function (l, index) {\n                    var obj = params.Objects[index];\n                    if (obj.DataRows) {\n                        obj.DataRows.forEach(function (r) {\n                            var item = l.addItem(new SP.ListItemCreationInformation());\n                            Object.keys(r).forEach(function (key) {\n                                item.set_item(key, r[key]);\n                            });\n                            item.update();\n                            params.ClientContext.load(item);\n                        });\n                    }\n                });\n                params.ClientContext.executeQueryAsync(resolve, resolve);\n            });\n        };\n        return ObjectLists;\n    }(ObjectHandlerBase_1.ObjectHandlerBase));\n    exports.ObjectLists = ObjectLists;\n});\n\n},{\"../../Sequencer/Sequencer\":15,\"../ObjectHandlerBase/ObjectHandlerBase\":8}],10:[function(require,module,exports){\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\n(function (factory) {/* istanbul ignore next */\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\", \"../../../util\", \"../ObjectHandlerBase/ObjectHandlerBase\"], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    /// <reference path=\"..\\schema\\inavigation.d.ts\" />\n    // import { Promise } from \"es6-promise\";\n    /// <reference path=\"../../../utils/util\" />\n    var util_1 = require(\"../../../util\");\n    var ObjectHandlerBase_1 = require(\"../ObjectHandlerBase/ObjectHandlerBase\");\n    var ObjectNavigation = (function (_super) {\n        __extends(ObjectNavigation, _super);\n        function ObjectNavigation() {\n            _super.call(this, \"Navigation\");\n        }\n        ObjectNavigation.prototype.ProvisionObjects = function (object) {\n            var _this = this;\n            _super.prototype.scope_started.call(this);\n            var clientContext = SP.ClientContext.get_current();\n            var navigation = clientContext.get_web().get_navigation();\n            return new Promise(function (resolve, reject) {\n                _this.ConfigureQuickLaunch(object.QuickLaunch, clientContext, navigation).then(function () {\n                    _super.prototype.scope_ended.call(_this);\n                    resolve();\n                }, function () {\n                    _super.prototype.scope_ended.call(_this);\n                    resolve();\n                });\n            });\n        };\n        ObjectNavigation.prototype.ConfigureQuickLaunch = function (nodes, clientContext, navigation) {\n            return new Promise(function (resolve, reject) {\n                if (nodes.length === 0) {\n                    resolve();\n                }\n                else {\n                    var quickLaunchNodeCollection_1 = navigation.get_quickLaunch();\n                    clientContext.load(quickLaunchNodeCollection_1);\n                    clientContext.executeQueryAsync(function () {\n                        var temporaryQuickLaunch = [];\n                        var index = quickLaunchNodeCollection_1.get_count() - 1;\n                        while (index >= 0) {\n                            var oldNode = quickLaunchNodeCollection_1.itemAt(index);\n                            temporaryQuickLaunch.push(oldNode);\n                            oldNode.deleteObject();\n                            index--;\n                        }\n                        clientContext.executeQueryAsync(function () {\n                            nodes.forEach(function (n) {\n                                var existingNode = util_1.getNodeFromCollectionByTitle(temporaryQuickLaunch, n.Title);\n                                var newNode = new SP.NavigationNodeCreationInformation();\n                                newNode.set_title(n.Title);\n                                newNode.set_url(existingNode ? existingNode.get_url() : util_1.replaceUrlTokens(n.Url));\n                                newNode.set_asLastNode(true);\n                                quickLaunchNodeCollection_1.add(newNode);\n                            });\n                            clientContext.executeQueryAsync(function () {\n                                jQuery.ajax({\n                                    \"url\": _spPageContextInfo.webAbsoluteUrl + \"/_api/web/Navigation/QuickLaunch\",\n                                    \"type\": \"get\",\n                                    \"headers\": {\n                                        \"accept\": \"application/json;odata=verbose\",\n                                    },\n                                }).done(function (data) {\n                                    data = data.d.results;\n                                    data.forEach(function (d) {\n                                        var node = navigation.getNodeById(d.Id);\n                                        var childrenNodeCollection = node.get_children();\n                                        var parentNode = jQuery.grep(nodes, function (value) { return value.Title === d.Title; })[0];\n                                        if (parentNode && parentNode.Children) {\n                                            parentNode.Children.forEach(function (n) {\n                                                var existingNode = util_1.getNodeFromCollectionByTitle(temporaryQuickLaunch, n.Title);\n                                                var newNode = new SP.NavigationNodeCreationInformation();\n                                                newNode.set_title(n.Title);\n                                                newNode.set_url(existingNode ? existingNode.get_url() : util_1.replaceUrlTokens(n.Url));\n                                                newNode.set_asLastNode(true);\n                                                childrenNodeCollection.add(newNode);\n                                            });\n                                        }\n                                    });\n                                    clientContext.executeQueryAsync(resolve, resolve);\n                                });\n                            }, resolve);\n                        });\n                    });\n                }\n            });\n        };\n        return ObjectNavigation;\n    }(ObjectHandlerBase_1.ObjectHandlerBase));\n    exports.ObjectNavigation = ObjectNavigation;\n});\n\n},{\"../../../util\":32,\"../ObjectHandlerBase/ObjectHandlerBase\":8}],11:[function(require,module,exports){\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\n(function (factory) {/* istanbul ignore next */\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\", \"../../../../sharepoint/util\", \"../ObjectHandlerBase/ObjectHandlerBase\"], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    // \"use strict\";\n    // \n    // /// <reference path=\"..\\schema\\ipropertybagentry.d.ts\" />\n    // import { Promise } from \"es6-promise\";\n    /// <reference path=\"../../../../utils/util\" />\n    var util_1 = require(\"../../../../sharepoint/util\");\n    var ObjectHandlerBase_1 = require(\"../ObjectHandlerBase/ObjectHandlerBase\");\n    var ObjectPropertyBagEntries = (function (_super) {\n        __extends(ObjectPropertyBagEntries, _super);\n        function ObjectPropertyBagEntries() {\n            _super.call(this, \"PropertyBagEntries\");\n        }\n        ObjectPropertyBagEntries.prototype.ProvisionObjects = function (entries) {\n            var _this = this;\n            _super.prototype.scope_started.call(this);\n            return new Promise(function (resolve, reject) {\n                if (!entries || entries.length === 0) {\n                    resolve();\n                }\n                else {\n                    var clientContext_1 = SP.ClientContext.get_current();\n                    var web_1 = clientContext_1.get_web();\n                    var propBag_1 = web_1.get_allProperties();\n                    var indexedProperties_1 = [];\n                    for (var i = 0; i < entries.length; i++) {\n                        var entry = entries[i];\n                        propBag_1.set_item(entry.Key, entry.Value);\n                        if (entry.Indexed) {\n                            indexedProperties_1.push(util_1.encodePropertyKey(entry.Key));\n                        }\n                        ;\n                    }\n                    ;\n                    web_1.update();\n                    clientContext_1.load(propBag_1);\n                    clientContext_1.executeQueryAsync(function () {\n                        if (indexedProperties_1.length > 0) {\n                            propBag_1.set_item(\"vti_indexedpropertykeys\", indexedProperties_1.join(\"|\"));\n                            web_1.update();\n                            clientContext_1.executeQueryAsync(function () {\n                                _super.prototype.scope_ended.call(_this);\n                                resolve();\n                            }, function () {\n                                _super.prototype.scope_ended.call(_this);\n                                resolve();\n                            });\n                        }\n                        else {\n                            _super.prototype.scope_ended.call(_this);\n                            resolve();\n                        }\n                    }, function () {\n                        _super.prototype.scope_ended.call(_this);\n                        resolve();\n                    });\n                }\n            });\n        };\n        return ObjectPropertyBagEntries;\n    }(ObjectHandlerBase_1.ObjectHandlerBase));\n    exports.ObjectPropertyBagEntries = ObjectPropertyBagEntries;\n});\n\n},{\"../../../../sharepoint/util\":43,\"../ObjectHandlerBase/ObjectHandlerBase\":8}],12:[function(require,module,exports){\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\n(function (factory) {/* istanbul ignore next */\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\", \"../ObjectHandlerBase/ObjectHandlerBase\"], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    /// <reference path=\"..\\schema\\iwebsettings.d.ts\" />\n    // import { Promise } from \"es6-promise\";\n    var ObjectHandlerBase_1 = require(\"../ObjectHandlerBase/ObjectHandlerBase\");\n    var ObjectWebSettings = (function (_super) {\n        __extends(ObjectWebSettings, _super);\n        function ObjectWebSettings() {\n            _super.call(this, \"WebSettings\");\n        }\n        ObjectWebSettings.prototype.ProvisionObjects = function (object) {\n            var _this = this;\n            _super.prototype.scope_started.call(this);\n            return new Promise(function (resolve, reject) {\n                var clientContext = SP.ClientContext.get_current();\n                var web = clientContext.get_web();\n                if (object.WelcomePage) {\n                    web.get_rootFolder().set_welcomePage(object.WelcomePage);\n                    web.get_rootFolder().update();\n                }\n                if (object.MasterUrl) {\n                    web.set_masterUrl(object.MasterUrl);\n                }\n                if (object.CustomMasterUrl) {\n                    web.set_customMasterUrl(object.CustomMasterUrl);\n                }\n                if (object.SaveSiteAsTemplateEnabled !== undefined) {\n                    web.set_saveSiteAsTemplateEnabled(object.SaveSiteAsTemplateEnabled);\n                }\n                if (object.QuickLaunchEnabled !== undefined) {\n                    web.set_saveSiteAsTemplateEnabled(object.QuickLaunchEnabled);\n                }\n                if (object.TreeViewEnabled !== undefined) {\n                    web.set_treeViewEnabled(object.TreeViewEnabled);\n                }\n                web.update();\n                clientContext.load(web);\n                clientContext.executeQueryAsync(function () {\n                    _super.prototype.scope_ended.call(_this);\n                    resolve();\n                }, function () {\n                    _super.prototype.scope_ended.call(_this);\n                    resolve();\n                });\n            });\n        };\n        return ObjectWebSettings;\n    }(ObjectHandlerBase_1.ObjectHandlerBase));\n    exports.ObjectWebSettings = ObjectWebSettings;\n});\n\n},{\"../ObjectHandlerBase/ObjectHandlerBase\":8}],13:[function(require,module,exports){\n(function (factory) {/* istanbul ignore next */\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\", \"./Core/Core\", \"./Logger/Logger\"], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    var Core_1 = require(\"./Core/Core\");\n    var Logger_1 = require(\"./Logger/Logger\");\n    var Provisioning = (function () {\n        function Provisioning() {\n            this.core = new Core_1.Core();\n        }\n        return Provisioning;\n    }());\n    exports.Provisioning = Provisioning;\n    exports.Log = new Logger_1.Logger();\n});\n\n},{\"./Core/Core\":1,\"./Logger/Logger\":3}],14:[function(require,module,exports){\n(function (factory) {/* istanbul ignore next */\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\"], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    exports.Code_execution_started = \"Code execution scope started\";\n    exports.Code_execution_ended = \"Code execution scope ended\";\n    exports.Template_invalid = \"The provided template is invalid\";\n});\n\n},{}],15:[function(require,module,exports){\n// import { Promise } from \"es6-promise\";\n(function (factory) {/* istanbul ignore next */\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\"], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    var Sequencer = (function () {\n        function Sequencer(__functions, __parameter, __scope) {\n            this.parameter = __parameter;\n            this.scope = __scope;\n            this.functions = this.deferredArray(__functions);\n        }\n        Sequencer.prototype.execute = function () {\n            var _this = this;\n            return new Promise(function (resolve, reject) {\n                var promises = [];\n                promises.push(jQuery.Deferred());\n                promises[0].resolve();\n                promises[0].promise();\n                var index = 1;\n                while (_this.functions[index - 1] !== undefined) {\n                    var i = promises.length - 1;\n                    promises.push(_this.functions[index - 1].execute(promises[i]));\n                    index++;\n                }\n                ;\n                Promise.all(promises).then(resolve, resolve);\n            });\n        };\n        Sequencer.prototype.deferredArray = function (__functions) {\n            var _this = this;\n            var functions = [];\n            __functions.forEach(function (f) { return functions.push(new DeferredObject(f, _this.parameter, _this.scope)); });\n            return functions;\n        };\n        return Sequencer;\n    }());\n    exports.Sequencer = Sequencer;\n    var DeferredObject = (function () {\n        function DeferredObject(func, parameter, scope) {\n            this.func = func;\n            this.parameter = parameter;\n            this.scope = scope;\n        }\n        DeferredObject.prototype.execute = function (depFunc) {\n            var _this = this;\n            if (!depFunc) {\n                return this.func.apply(this.scope, [this.parameter]);\n            }\n            return new Promise(function (resolve, reject) {\n                depFunc.then(function () {\n                    _this.func.apply(_this.scope, [_this.parameter]).then(resolve, resolve);\n                });\n            });\n        };\n        return DeferredObject;\n    }());\n});\n\n},{}],16:[function(require,module,exports){\n(function (factory) {/* istanbul ignore next */\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\", \"../../utils/util\", \"../../collections/collections\"], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    var Util = require(\"../../utils/util\");\n    var collections_1 = require(\"../../collections/collections\");\n    /**\n     * Queryable Base Class\n     *\n     */\n    var Queryable = (function () {\n        /**\n         * Creates a new instance of the Queryable class\n         *\n         * @constructor\n         * @param baseUrl A string or Queryable that should form the base part of the url\n         *\n         */\n        function Queryable(baseUrl, path) {\n            if (typeof baseUrl === \"string\") {\n                var s = baseUrl;\n                this._url = Util.combinePaths(s, path);\n            }\n            else {\n                var q = baseUrl;\n                this._url = Util.combinePaths(q._url, path);\n            }\n            this._query = new collections_1.Dictionary();\n        }\n        /**\n         * Directly concatonates the supplied string to the current url, not normalizing \"/\" chars\n         *\n         * @param pathPart The string to concatonate to the url\n         */\n        Queryable.prototype.concat = function (pathPart) {\n            this._url += pathPart;\n        };\n        /**\n         * Appends the given string and normalizes \"/\" chars\n         *\n         * @param pathPart The string to append\n         */\n        Queryable.prototype.append = function (pathPart) {\n            this._url = Util.combinePaths(this._url, pathPart);\n        };\n        /**\n         * Gets the currentl url, made server relative or absolute based on the availability of the _spPageContextInfo object\n         *\n         */\n        Queryable.prototype.toUrl = function () {\n            if (typeof _spPageContextInfo !== \"undefined\") {\n                if (_spPageContextInfo.hasOwnProperty(\"webAbsoluteUrl\")) {\n                    return Util.combinePaths(_spPageContextInfo.webAbsoluteUrl, this._url);\n                }\n                else if (_spPageContextInfo.hasOwnProperty(\"webServerRelativeUrl\")) {\n                    return Util.combinePaths(_spPageContextInfo.webServerRelativeUrl, this._url);\n                }\n            }\n            return this._url;\n        };\n        /**\n         * Gets the full url with query information\n         *\n         */\n        Queryable.prototype.toUrlAndQuery = function () {\n            var _this = this;\n            var url = this.toUrl();\n            if (this._query.count() > 0) {\n                url += \"?\";\n                var keys = this._query.getKeys();\n                var query = keys.map(function (key, ix, arr) { return (key + \"=\" + _this._query.get(key)); });\n                url += query.join(\"&\");\n            }\n            return url;\n        };\n        return Queryable;\n    }());\n    exports.Queryable = Queryable;\n});\n\n},{\"../../collections/collections\":34,\"../../utils/util\":49}],17:[function(require,module,exports){\n(function (factory) {/* istanbul ignore next */\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\", \"./web\"], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    var web_1 = require(\"./web\");\n    /**\n     * Root of the SharePoint REST module\n     */\n    var Rest = (function () {\n        function Rest() {\n            this.web = new web_1.Web(\"_api\");\n        }\n        return Rest;\n    }());\n    exports.Rest = Rest;\n});\n\n},{\"./web\":30}],18:[function(require,module,exports){\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\n(function (factory) {/* istanbul ignore next */\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\", \"./Queryable\", \"../../utils/util\", \"./mixins\"], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    var Queryable_1 = require(\"./Queryable\");\n    var Util = require(\"../../utils/util\");\n    var Mixins = require(\"./mixins\");\n    var ContentTypes = (function (_super) {\n        __extends(ContentTypes, _super);\n        function ContentTypes(url) {\n            _super.call(this, url, \"contentTypes\");\n        }\n        ContentTypes.prototype.getById = function (id) {\n            this.concat(\"(\\\"\" + id + \"\\\")\");\n            return this;\n        };\n        // gettable stub for mixin\n        ContentTypes.prototype.get = function () { return; };\n        // selectable stub for mixin\n        ContentTypes.prototype.select = function () {\n            var selects = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                selects[_i - 0] = arguments[_i];\n            }\n            return;\n        };\n        // filterable stub for mixin\n        ContentTypes.prototype.filter = function (filter) { return; };\n        return ContentTypes;\n    }(Queryable_1.Queryable));\n    exports.ContentTypes = ContentTypes;\n    Util.applyMixins(ContentTypes, Mixins.Gettable, Mixins.Selectable, Mixins.Filterable);\n    var ContentType = (function (_super) {\n        __extends(ContentType, _super);\n        function ContentType(baseUrl) {\n            _super.call(this, baseUrl);\n        }\n        // gettable stub for mixin\n        ContentType.prototype.get = function () { return; };\n        // selectable stub for mixin\n        ContentType.prototype.select = function () {\n            var selects = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                selects[_i - 0] = arguments[_i];\n            }\n            return;\n        };\n        return ContentType;\n    }(Queryable_1.Queryable));\n    exports.ContentType = ContentType;\n    Util.applyMixins(ContentType, Mixins.Gettable, Mixins.Selectable);\n});\n\n},{\"../../utils/util\":49,\"./Queryable\":16,\"./mixins\":22}],19:[function(require,module,exports){\narguments[4][18][0].apply(exports,arguments)\n},{\"../../utils/util\":49,\"./Queryable\":16,\"./mixins\":22,\"dup\":18}],20:[function(require,module,exports){\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\n(function (factory) {/* istanbul ignore next */\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\", \"./Queryable\", \"../../utils/util\", \"./mixins\"], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    var Queryable_1 = require(\"./Queryable\");\n    var Util = require(\"../../utils/util\");\n    var Mixins = require(\"./mixins\");\n    var Items = (function (_super) {\n        __extends(Items, _super);\n        function Items(url) {\n            _super.call(this, url, \"items\");\n        }\n        Items.prototype.getById = function (id) {\n            this.concat(\"(\" + id + \")\");\n            return this;\n        };\n        // gettable stub for mixin\n        Items.prototype.get = function () { return; };\n        // selectable stub for mixin\n        Items.prototype.select = function () {\n            var selects = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                selects[_i - 0] = arguments[_i];\n            }\n            return;\n        };\n        // filterable stub for mixin\n        Items.prototype.filter = function (filter) { return; };\n        return Items;\n    }(Queryable_1.Queryable));\n    exports.Items = Items;\n    Util.applyMixins(Items, Mixins.Gettable, Mixins.Selectable, Mixins.Filterable);\n    var Item = (function (_super) {\n        __extends(Item, _super);\n        function Item(baseUrl) {\n            _super.call(this, baseUrl);\n        }\n        // gettable stub for mixin\n        Item.prototype.get = function () { return; };\n        // selectable stub for mixin\n        Item.prototype.select = function () {\n            var selects = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                selects[_i - 0] = arguments[_i];\n            }\n            return;\n        };\n        return Item;\n    }(Queryable_1.Queryable));\n    exports.Item = Item;\n    Util.applyMixins(Item, Mixins.Gettable, Mixins.Selectable);\n});\n\n},{\"../../utils/util\":49,\"./Queryable\":16,\"./mixins\":22}],21:[function(require,module,exports){\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\n(function (factory) {/* istanbul ignore next */\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\", \"./items\", \"./views\", \"./contenttypes\", \"./queryable\", \"../../utils/util\", \"./mixins\"], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    var items_1 = require(\"./items\");\n    var views_1 = require(\"./views\");\n    var contenttypes_1 = require(\"./contenttypes\");\n    var queryable_1 = require(\"./queryable\");\n    var Util = require(\"../../utils/util\");\n    var Mixins = require(\"./mixins\");\n    var Lists = (function (_super) {\n        __extends(Lists, _super);\n        function Lists(baseUrl) {\n            _super.call(this, baseUrl, \"lists\");\n        }\n        Lists.prototype.getByTitle = function (title) {\n            this.append(\"getByTitle('\" + title + \"')\");\n            return new List(this);\n        };\n        Lists.prototype.getById = function (id) {\n            this.concat(\"('\" + id + \"')\");\n            return new List(this);\n        };\n        // gettable stub for mixin\n        Lists.prototype.get = function () { return; };\n        // selectable stub for mixin\n        Lists.prototype.select = function () {\n            var selects = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                selects[_i - 0] = arguments[_i];\n            }\n            return;\n        };\n        // filterable stub for mixin\n        Lists.prototype.filter = function (filter) { return; };\n        return Lists;\n    }(queryable_1.Queryable));\n    exports.Lists = Lists;\n    Util.applyMixins(Lists, Mixins.Gettable, Mixins.Selectable, Mixins.Filterable);\n    var List = (function (_super) {\n        __extends(List, _super);\n        function List(baseUrl) {\n            _super.call(this, baseUrl);\n            this.contentTypes = new contenttypes_1.ContentTypes(this);\n            this.items = new items_1.Items(this);\n            this.views = new views_1.Views(this);\n        }\n        // gettable stub for mixin\n        List.prototype.get = function () { return; };\n        // selectable stub for mixin\n        List.prototype.select = function () {\n            var selects = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                selects[_i - 0] = arguments[_i];\n            }\n            return;\n        };\n        return List;\n    }(queryable_1.Queryable));\n    exports.List = List;\n    Util.applyMixins(List, Mixins.Gettable, Mixins.Selectable);\n});\n\n},{\"../../utils/util\":49,\"./contenttypes\":19,\"./items\":20,\"./mixins\":22,\"./queryable\":24,\"./views\":29}],22:[function(require,module,exports){\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\n(function (factory) {/* istanbul ignore next */\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\", \"./queryable\", \"../../net/httpClient\"], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    var queryable_1 = require(\"./queryable\");\n    var httpClient_1 = require(\"../../net/httpClient\");\n    var Selectable = (function (_super) {\n        __extends(Selectable, _super);\n        function Selectable() {\n            _super.apply(this, arguments);\n        }\n        Selectable.prototype.select = function () {\n            var selects = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                selects[_i - 0] = arguments[_i];\n            }\n            this._query.add(\"$select\", selects.join(\",\"));\n            return this;\n        };\n        return Selectable;\n    }(queryable_1.Queryable));\n    exports.Selectable = Selectable;\n    var Filterable = (function (_super) {\n        __extends(Filterable, _super);\n        function Filterable() {\n            _super.apply(this, arguments);\n        }\n        Filterable.prototype.filter = function (filter) {\n            this._query.add(\"$filter\", filter);\n            return this;\n        };\n        return Filterable;\n    }(queryable_1.Queryable));\n    exports.Filterable = Filterable;\n    var Gettable = (function (_super) {\n        __extends(Gettable, _super);\n        function Gettable() {\n            _super.apply(this, arguments);\n        }\n        Gettable.prototype.get = function () {\n            var client = new httpClient_1.HttpClient();\n            return client.get(this.toUrlAndQuery()).then(function (response) {\n                if (response.status !== 200) {\n                    throw \"Error making GET request: \" + response.statusText;\n                }\n                return response.json();\n            }).then(function (json) {\n                return json.hasOwnProperty(\"d\") ? json.d.hasOwnProperty(\"results\") ? json.d.results : json.d : json;\n            });\n        };\n        return Gettable;\n    }(queryable_1.Queryable));\n    exports.Gettable = Gettable;\n});\n\n},{\"../../net/httpClient\":41,\"./queryable\":24}],23:[function(require,module,exports){\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\n(function (factory) {/* istanbul ignore next */\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\", \"./queryable\", \"./quickLaunch\", \"./topNavigationBar\"], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    var queryable_1 = require(\"./queryable\");\n    var quickLaunch_1 = require(\"./quickLaunch\");\n    var topNavigationBar_1 = require(\"./topNavigationBar\");\n    var Navigation = (function (_super) {\n        __extends(Navigation, _super);\n        function Navigation(url) {\n            _super.call(this, url, \"Navigation\");\n            this.quicklaunch = new quickLaunch_1.QuickLaunch(this);\n            this.topNavigationBar = new topNavigationBar_1.TopNavigationBar(this);\n        }\n        return Navigation;\n    }(queryable_1.Queryable));\n    exports.Navigation = Navigation;\n});\n\n},{\"./queryable\":24,\"./quickLaunch\":25,\"./topNavigationBar\":28}],24:[function(require,module,exports){\narguments[4][16][0].apply(exports,arguments)\n},{\"../../collections/collections\":34,\"../../utils/util\":49,\"dup\":16}],25:[function(require,module,exports){\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\n(function (factory) {/* istanbul ignore next */\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\", \"./Queryable\", \"../../utils/util\", \"./mixins\"], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    var Queryable_1 = require(\"./Queryable\");\n    var Util = require(\"../../utils/util\");\n    var Mixins = require(\"./mixins\");\n    var QuickLaunch = (function (_super) {\n        __extends(QuickLaunch, _super);\n        function QuickLaunch(url) {\n            _super.call(this, url, \"QuickLaunch\");\n        }\n        // gettable stub for mixin\n        QuickLaunch.prototype.get = function () { return; };\n        return QuickLaunch;\n    }(Queryable_1.Queryable));\n    exports.QuickLaunch = QuickLaunch;\n    Util.applyMixins(QuickLaunch, Mixins.Gettable);\n});\n\n},{\"../../utils/util\":49,\"./Queryable\":16,\"./mixins\":22}],26:[function(require,module,exports){\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\n(function (factory) {/* istanbul ignore next */\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\", \"./Queryable\", \"../../utils/util\", \"./mixins\"], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    var Queryable_1 = require(\"./Queryable\");\n    var Util = require(\"../../utils/util\");\n    var Mixins = require(\"./mixins\");\n    var RoleAssignments = (function (_super) {\n        __extends(RoleAssignments, _super);\n        function RoleAssignments(url) {\n            _super.call(this, url, \"RoleAssignments\");\n        }\n        // gettable stub for mixin\n        RoleAssignments.prototype.get = function () { return; };\n        // filterable stub for mixin\n        RoleAssignments.prototype.filter = function (filter) { return; };\n        // selectable stub for mixin\n        RoleAssignments.prototype.select = function () {\n            var selects = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                selects[_i - 0] = arguments[_i];\n            }\n            return;\n        };\n        return RoleAssignments;\n    }(Queryable_1.Queryable));\n    exports.RoleAssignments = RoleAssignments;\n    Util.applyMixins(RoleAssignments, Mixins.Gettable, Mixins.Filterable, Mixins.Selectable);\n});\n\n},{\"../../utils/util\":49,\"./Queryable\":16,\"./mixins\":22}],27:[function(require,module,exports){\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\n(function (factory) {/* istanbul ignore next */\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\", \"./Queryable\", \"../../utils/util\", \"./mixins\"], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    var Queryable_1 = require(\"./Queryable\");\n    var Util = require(\"../../utils/util\");\n    var Mixins = require(\"./mixins\");\n    var SiteUsers = (function (_super) {\n        __extends(SiteUsers, _super);\n        function SiteUsers(url) {\n            _super.call(this, url, \"SiteUsers\");\n        }\n        // gettable stub for mixin\n        SiteUsers.prototype.get = function () { return; };\n        // filterable stub for mixin\n        SiteUsers.prototype.filter = function (filter) { return; };\n        // selectable stub for mixin\n        SiteUsers.prototype.select = function () {\n            var selects = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                selects[_i - 0] = arguments[_i];\n            }\n            return;\n        };\n        return SiteUsers;\n    }(Queryable_1.Queryable));\n    exports.SiteUsers = SiteUsers;\n    Util.applyMixins(SiteUsers, Mixins.Gettable, Mixins.Filterable, Mixins.Selectable);\n});\n\n},{\"../../utils/util\":49,\"./Queryable\":16,\"./mixins\":22}],28:[function(require,module,exports){\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\n(function (factory) {/* istanbul ignore next */\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\", \"./Queryable\", \"../../utils/util\", \"./mixins\"], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    var Queryable_1 = require(\"./Queryable\");\n    var Util = require(\"../../utils/util\");\n    var Mixins = require(\"./mixins\");\n    var TopNavigationBar = (function (_super) {\n        __extends(TopNavigationBar, _super);\n        function TopNavigationBar(url) {\n            _super.call(this, url, \"TopNavigationBar\");\n        }\n        // gettable stub for mixin\n        TopNavigationBar.prototype.get = function () { return; };\n        return TopNavigationBar;\n    }(Queryable_1.Queryable));\n    exports.TopNavigationBar = TopNavigationBar;\n    Util.applyMixins(TopNavigationBar, Mixins.Gettable);\n});\n\n},{\"../../utils/util\":49,\"./Queryable\":16,\"./mixins\":22}],29:[function(require,module,exports){\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\n(function (factory) {/* istanbul ignore next */\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\", \"./Queryable\", \"../../utils/util\", \"./mixins\"], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    var Queryable_1 = require(\"./Queryable\");\n    var Util = require(\"../../utils/util\");\n    var Mixins = require(\"./mixins\");\n    var Views = (function (_super) {\n        __extends(Views, _super);\n        function Views(url) {\n            _super.call(this, url, \"views\");\n        }\n        Views.prototype.getById = function (id) {\n            this.concat(\"(guid'\" + id + \"')\");\n            return this;\n        };\n        // gettable stub for mixin\n        Views.prototype.get = function () { return; };\n        // selectable stub for mixin\n        Views.prototype.select = function () {\n            var selects = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                selects[_i - 0] = arguments[_i];\n            }\n            return;\n        };\n        // filterable stub for mixin\n        Views.prototype.filter = function (filter) { return; };\n        return Views;\n    }(Queryable_1.Queryable));\n    exports.Views = Views;\n    Util.applyMixins(Views, Mixins.Gettable, Mixins.Selectable, Mixins.Filterable);\n    var View = (function (_super) {\n        __extends(View, _super);\n        function View(baseUrl) {\n            _super.call(this, baseUrl);\n        }\n        // gettable stub for mixin\n        View.prototype.get = function () { return; };\n        // selectable stub for mixin\n        View.prototype.select = function () {\n            var selects = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                selects[_i - 0] = arguments[_i];\n            }\n            return;\n        };\n        return View;\n    }(Queryable_1.Queryable));\n    exports.View = View;\n    Util.applyMixins(View, Mixins.Gettable, Mixins.Selectable);\n});\n\n},{\"../../utils/util\":49,\"./Queryable\":16,\"./mixins\":22}],30:[function(require,module,exports){\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\n(function (factory) {/* istanbul ignore next */\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\", \"./Queryable\", \"../../utils/util\", \"./mixins\", \"./lists\", \"./roleAssignments\", \"./navigation\", \"./siteUsers\", \"./contentTypes\"], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    var Queryable_1 = require(\"./Queryable\");\n    var Util = require(\"../../utils/util\");\n    var Mixins = require(\"./mixins\");\n    var lists_1 = require(\"./lists\");\n    var roleAssignments_1 = require(\"./roleAssignments\");\n    var navigation_1 = require(\"./navigation\");\n    var siteUsers_1 = require(\"./siteUsers\");\n    var contentTypes_1 = require(\"./contentTypes\");\n    var Web = (function (_super) {\n        __extends(Web, _super);\n        function Web(url) {\n            _super.call(this, url, \"web\");\n            this.lists = new lists_1.Lists(this);\n            this.roleAssignments = new roleAssignments_1.RoleAssignments(this);\n            this.navigation = new navigation_1.Navigation(this);\n            this.siteUsers = new siteUsers_1.SiteUsers(this);\n            this.contentTypes = new contentTypes_1.ContentTypes(this);\n        }\n        // gettable stub for mixin\n        Web.prototype.get = function () { return; };\n        // selectable stub for mixin\n        Web.prototype.select = function () {\n            var selects = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                selects[_i - 0] = arguments[_i];\n            }\n            return;\n        };\n        return Web;\n    }(Queryable_1.Queryable));\n    exports.Web = Web;\n    Util.applyMixins(Web, Mixins.Gettable, Mixins.Selectable);\n});\n\n},{\"../../utils/util\":49,\"./Queryable\":16,\"./contentTypes\":18,\"./lists\":21,\"./mixins\":22,\"./navigation\":23,\"./roleAssignments\":26,\"./siteUsers\":27}],31:[function(require,module,exports){\n(function (factory) {/* istanbul ignore next */\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\", \"./Provisioning/Provisioning\", \"./Rest/Rest\"], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    var Provisioning_1 = require(\"./Provisioning/Provisioning\");\n    var Rest_1 = require(\"./Rest/Rest\");\n    var SharePoint = (function () {\n        function SharePoint() {\n            /**\n             * The REST base class for SharePoint\n             */\n            this.rest = new Rest_1.Rest();\n            /**\n            * The Provisioning base class for SharePoint\n            */\n            this.provisioning = new Provisioning_1.Provisioning();\n        }\n        return SharePoint;\n    }());\n    exports.SharePoint = SharePoint;\n});\n\n},{\"./Provisioning/Provisioning\":13,\"./Rest/Rest\":17}],32:[function(require,module,exports){\n(function (factory) {/* istanbul ignore next */\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\"], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    /**\n     * Retrieves the list ID of the current page from _spPageContextInfo\n     */\n    function getListId() {\n        return _spPageContextInfo.hasOwnProperty(\"pageListId\") ? _spPageContextInfo.pageListId.substring(1, 37) : \"\";\n    }\n    exports.getListId = getListId;\n    /**\n     * Make URL relative to host\n     *\n     * @param url The URL to make relative\n     */\n    function getRelativeUrl(url) {\n        return url.replace(document.location.protocol + \"//\" + document.location.hostname, \"\");\n    }\n    exports.getRelativeUrl = getRelativeUrl;\n    /**\n     * Retrieves the node with the given title from a collection of SP.NavigationNode\n     */\n    function getNodeFromCollectionByTitle(nodeCollection, title) {\n        var f = jQuery.grep(nodeCollection, function (val) {\n            return val.get_title() === title;\n        });\n        return f[0] || null;\n    }\n    exports.getNodeFromCollectionByTitle = getNodeFromCollectionByTitle;\n    ;\n    /**\n     * Replaces URL tokens in a string\n     */\n    function replaceUrlTokens(url) {\n        return url.replace(/{site}/g, _spPageContextInfo.webAbsoluteUrl)\n            .replace(/{sitecollection}/g, _spPageContextInfo.siteAbsoluteUrl);\n    }\n    exports.replaceUrlTokens = replaceUrlTokens;\n    ;\n    function encodePropertyKey(propKey) {\n        var bytes = [];\n        for (var i = 0; i < propKey.length; ++i) {\n            bytes.push(propKey.charCodeAt(i));\n            bytes.push(0);\n        }\n        var b64encoded = window.btoa(String.fromCharCode.apply(null, bytes));\n        return b64encoded;\n    }\n    exports.encodePropertyKey = encodePropertyKey;\n});\n\n},{}],33:[function(require,module,exports){\n(function (factory) {/* istanbul ignore next */\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\"], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    /**\n     * Combines an arbitrary set of paths ensuring that the slashes are normalized\n     *\n     * @param paths 0 to n path parts to combine\n     */\n    function get(url) {\n        return jQuery.ajax({\n            \"url\": url,\n            \"type\": \"get\",\n            \"headers\": { \"accept\": \"application/json;odata=verbose\" },\n        });\n    }\n    exports.get = get;\n});\n\n},{}],34:[function(require,module,exports){\n(function (factory) {/* istanbul ignore next */\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\"], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    /**\n     * Generic dictionary\n     */\n    var Dictionary = (function () {\n        /**\n         * Creates a new instance of the Dictionary<T> class\n         *\n         * @constructor\n         */\n        function Dictionary() {\n            this.keys = [];\n            this.values = [];\n        }\n        /**\n         * Gets a value from the collection using the specified key\n         *\n         * @param key The key whose value we want to return, returns null if the key does not exist\n         */\n        Dictionary.prototype.get = function (key) {\n            var index = this.keys.indexOf(key);\n            if (index < 0) {\n                return null;\n            }\n            return this.values[index];\n        };\n        /**\n         * Adds the supplied key and value to the dictionary\n         *\n         * @param key The key to add\n         * @param o The value to add\n         */\n        Dictionary.prototype.add = function (key, o) {\n            var index = this.keys.indexOf(key);\n            if (index > -1) {\n                this.values[index] = o;\n            }\n            else {\n                this.keys.push(key);\n                this.values.push(o);\n            }\n        };\n        /**\n         * Merges the supplied typed hash into this dictionary instance. Existing values are updated and new ones are created as appropriate.\n         */\n        Dictionary.prototype.merge = function (source) {\n            for (var key in source) {\n                if (typeof key === \"string\") {\n                    this.add(key, source[key]);\n                }\n            }\n        };\n        /**\n         * Removes a value from the dictionary\n         *\n         * @param key The key of the key/value pair to remove. Returns null if the key was not found.\n         */\n        Dictionary.prototype.remove = function (key) {\n            var index = this.keys.indexOf(key);\n            if (index < 0) {\n                // could throw an exception here\n                return null;\n            }\n            var val = this.values[index];\n            this.keys.splice(index, 1);\n            this.values.splice(index, 1);\n            return val;\n        };\n        /**\n         * Returns all the keys currently in the dictionary as an array\n         */\n        Dictionary.prototype.getKeys = function () {\n            return this.keys;\n        };\n        /**\n         * Returns all the values currently in the dictionary as an array\n         */\n        Dictionary.prototype.getValues = function () {\n            return this.values;\n        };\n        /**\n         * Clears the current dictionary\n         */\n        Dictionary.prototype.clear = function () {\n            this.keys = [];\n            this.values = [];\n        };\n        /**\n         * Gets a count of the items currently in the dictionary\n         */\n        Dictionary.prototype.count = function () {\n            return this.keys.length;\n        };\n        return Dictionary;\n    }());\n    exports.Dictionary = Dictionary;\n});\n\n},{}],35:[function(require,module,exports){\n(function (factory) {/* istanbul ignore next */\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\", \"../collections/collections\", \"./providers/providers\"], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    var Collections = require(\"../collections/collections\");\n    var providers = require(\"./providers/providers\");\n    /**\n     * Set of pre-defined providers which are available from this library\n     */\n    exports.Providers = providers;\n    /**\n     * Class used to manage the current application settings\n     *\n     */\n    var Settings = (function () {\n        /**\n         * Creates a new instance of the settings class\n         *\n         * @constructor\n         */\n        function Settings() {\n            this._settings = new Collections.Dictionary();\n        }\n        /**\n         * Adds a new single setting, or overwrites a previous setting with the same key\n         *\n         * @param {string} key The key used to store this setting\n         * @param {string} value The setting value to store\n         */\n        Settings.prototype.add = function (key, value) {\n            this._settings.add(key, value);\n        };\n        /**\n         * Adds a JSON value to the collection as a string, you must use getJSON to rehydrate the object when read\n         *\n         * @param {string} key The key used to store this setting\n         * @param {any} value The setting value to store\n         */\n        Settings.prototype.addJSON = function (key, value) {\n            this._settings.add(key, JSON.stringify(value));\n        };\n        /**\n         * Applies the supplied hash to the setting collection overwriting any existing value, or created new values\n         *\n         * @param {Collections.ITypedHash<any>} hash The set of values to add\n         */\n        Settings.prototype.apply = function (hash) {\n            this._settings.merge(hash);\n        };\n        /**\n         * Loads configuration settings into the collection from the supplied provider and returns a Promise\n         *\n         * @param {IConfigurationProvider} provider The provider from which we will load the settings\n         */\n        Settings.prototype.load = function (provider) {\n            var _this = this;\n            return new Promise(function (resolve, reject) {\n                provider.getConfiguration().then(function (value) {\n                    _this._settings.merge(value);\n                    resolve();\n                }).catch(function (reason) {\n                    reject(reason);\n                });\n            });\n        };\n        /**\n         * Gets a value from the configuration\n         *\n         * @param {string} key The key whose value we want to return. Returns null if the key does not exist\n         * @return {string} string value from the configuration\n         */\n        Settings.prototype.get = function (key) {\n            return this._settings.get(key);\n        };\n        /**\n         * Gets a JSON value, rehydrating the stored string to the original object\n         *\n         * @param {string} key The key whose value we want to return. Returns null if the key does not exist\n         * @return {any} object from the configuration\n         */\n        Settings.prototype.getJSON = function (key) {\n            var o = this.get(key);\n            if (typeof o === \"undefined\" || o === null) {\n                return o;\n            }\n            return JSON.parse(o);\n        };\n        return Settings;\n    }());\n    exports.Settings = Settings;\n});\n\n},{\"../collections/collections\":34,\"./providers/providers\":37}],36:[function(require,module,exports){\n(function (factory) {/* istanbul ignore next */\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\", \"../../utils/storage\"], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    var storage = require(\"../../utils/storage\");\n    /**\n     * A caching provider which can wrap other non-caching providers\n     *\n     */\n    var CachingConfigurationProvider = (function () {\n        /**\n         * Creates a new caching configuration provider\n         * @constructor\n         * @param {IConfigurationProvider} wrappedProvider Provider which will be used to fetch the configuration\n         * @param {string} cacheKey Key that will be used to store cached items to the cache\n         * @param {IPnPClientStore} cacheStore OPTIONAL storage, which will be used to store cached settings.\n         */\n        function CachingConfigurationProvider(wrappedProvider, cacheKey, cacheStore) {\n            this.wrappedProvider = wrappedProvider;\n            this.store = (cacheStore) ? cacheStore : this.selectPnPCache();\n            this.cacheKey = \"_configcache_\" + cacheKey;\n        }\n        /**\n         * Gets the wrapped configuration providers\n         *\n         * @return {IConfigurationProvider} Wrapped configuration provider\n         */\n        CachingConfigurationProvider.prototype.getWrappedProvider = function () {\n            return this.wrappedProvider;\n        };\n        /**\n         * Loads the configuration values either from the cache or from the wrapped provider\n         *\n         * @return {Promise<ITypedHash<string>>} Promise of loaded configuration values\n         */\n        CachingConfigurationProvider.prototype.getConfiguration = function () {\n            var _this = this;\n            // Cache not available, pass control to  the wrapped provider\n            if ((!this.store) || (!this.store.enabled)) {\n                return this.wrappedProvider.getConfiguration();\n            }\n            // Value is found in cache, return it directly\n            var cachedConfig = this.store.get(this.cacheKey);\n            if (cachedConfig) {\n                return new Promise(function (resolve, reject) {\n                    resolve(cachedConfig);\n                });\n            }\n            // Get and cache value from the wrapped provider\n            var providerPromise = this.wrappedProvider.getConfiguration();\n            providerPromise.then(function (providedConfig) {\n                _this.store.put(_this.cacheKey, providedConfig);\n            });\n            return providerPromise;\n        };\n        CachingConfigurationProvider.prototype.selectPnPCache = function () {\n            var pnpCache = new storage.PnPClientStorage();\n            if ((pnpCache.local) && (pnpCache.local.enabled)) {\n                return pnpCache.local;\n            }\n            if ((pnpCache.session) && (pnpCache.session.enabled)) {\n                return pnpCache.session;\n            }\n            throw new Error(\"Cannot create a caching configuration provider since cache is not available.\");\n        };\n        return CachingConfigurationProvider;\n    }());\n    Object.defineProperty(exports, \"__esModule\", { value: true });\n    exports.default = CachingConfigurationProvider;\n});\n\n},{\"../../utils/storage\":48}],37:[function(require,module,exports){\n(function (factory) {/* istanbul ignore next */\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\", \"./cachingConfigurationProvider\", \"./spListConfigurationProvider\"], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    var cachingConfigurationProvider_1 = require(\"./cachingConfigurationProvider\");\n    var spListConfigurationProvider_1 = require(\"./spListConfigurationProvider\");\n    exports.CachingConfigurationProvider = cachingConfigurationProvider_1.default;\n    exports.SPListConfigurationProvider = spListConfigurationProvider_1.default;\n});\n\n},{\"./cachingConfigurationProvider\":36,\"./spListConfigurationProvider\":38}],38:[function(require,module,exports){\n(function (factory) {/* istanbul ignore next */\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\", \"./cachingConfigurationProvider\", \"../../Utils/Ajax\"], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    var cachingConfigurationProvider_1 = require(\"./cachingConfigurationProvider\");\n    var ajax = require(\"../../Utils/Ajax\");\n    /**\n     * A configuration provider which loads configuration values from a SharePoint list\n     *\n     */\n    var SPListConfigurationProvider = (function () {\n        /**\n         * Creates a new SharePoint list based configuration provider\n         * @constructor\n         * @param {string} webUrl Url of the SharePoint site, where the configuration list is located\n         * @param {string} listTitle Title of the SharePoint list, which contains the configuration settings (optional, default = \"config\")\n         */\n        function SPListConfigurationProvider(webUrl, listTitle) {\n            if (listTitle === void 0) { listTitle = \"config\"; }\n            this.webUrl = webUrl;\n            this.listTitle = listTitle;\n        }\n        /**\n         * Gets the url of the SharePoint site, where the configuration list is located\n         *\n         * @return {string} Url address of the site\n         */\n        SPListConfigurationProvider.prototype.getWebUrl = function () {\n            return this.webUrl;\n        };\n        /**\n         * Gets the title of the SharePoint list, which contains the configuration settings\n         *\n         * @return {string} List title\n         */\n        SPListConfigurationProvider.prototype.getListTitle = function () {\n            return this.listTitle;\n        };\n        /**\n         * Loads the configuration values from the SharePoint list\n         *\n         * @return {Promise<ITypedHash<string>>} Promise of loaded configuration values\n         */\n        SPListConfigurationProvider.prototype.getConfiguration = function () {\n            var _this = this;\n            return new Promise(function (resolve, reject) {\n                var url = _this.webUrl + \"/_api/web/lists/getByTitle('\" + _this.listTitle + \"')/items?$select=Title,Value\";\n                ajax.get(url).success(function (data) {\n                    var results = (data.d.hasOwnProperty(\"results\")) ? data.d.results : data.d;\n                    var configuration = {};\n                    results.forEach(function (i) {\n                        configuration[i.Title] = i.Value;\n                    });\n                    resolve(configuration);\n                });\n            });\n        };\n        /**\n         * Wraps the current provider in a cache enabled provider\n         *\n         * @return {CachingConfigurationProvider} Caching providers which wraps the current provider\n         */\n        SPListConfigurationProvider.prototype.asCaching = function () {\n            var cacheKey = \"splist_\" + this.webUrl + \"+\" + this.listTitle;\n            return new cachingConfigurationProvider_1.default(this, cacheKey);\n        };\n        return SPListConfigurationProvider;\n    }());\n    Object.defineProperty(exports, \"__esModule\", { value: true });\n    exports.default = SPListConfigurationProvider;\n});\n\n},{\"../../Utils/Ajax\":33,\"./cachingConfigurationProvider\":36}],39:[function(require,module,exports){\n(function (factory) {/* istanbul ignore next */\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\", \"../collections/collections\", \"../utils/util\"], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    var collections_1 = require(\"../collections/collections\");\n    var Util = require(\"../utils/util\");\n    var CachedDigest = (function () {\n        function CachedDigest() {\n        }\n        return CachedDigest;\n    }());\n    exports.CachedDigest = CachedDigest;\n    var DigestCache = (function () {\n        function DigestCache(_httpClient, _digests) {\n            if (_digests === void 0) { _digests = new collections_1.Dictionary(); }\n            this._httpClient = _httpClient;\n            this._digests = _digests;\n        }\n        DigestCache.prototype.getDigest = function (webUrl) {\n            var self = this;\n            var cachedDigest = this._digests.get(webUrl);\n            if (cachedDigest !== null) {\n                var now = new Date();\n                if (now < cachedDigest.expiration) {\n                    return Promise.resolve(cachedDigest.value);\n                }\n            }\n            var url = Util.combinePaths(webUrl, \"/_api/contextinfo\");\n            return self._httpClient.fetchRaw(url, {\n                cache: \"no-cache\",\n                credentials: \"same-origin\",\n                headers: {\n                    \"Accept\": \"application/json\",\n                    \"Content-type\": \"application/json;odata=verbose;charset=utf-8\",\n                },\n                method: \"POST\",\n            }).then(function (response) {\n                return response.json();\n            }).then(function (data) {\n                var newCachedDigest = new CachedDigest();\n                newCachedDigest.value = data.FormDigestValue;\n                var seconds = data.FormDigestTimeoutSeconds;\n                var expiration = new Date();\n                expiration.setTime(expiration.getTime() + 1000 * seconds);\n                newCachedDigest.expiration = expiration;\n                self._digests.add(webUrl, newCachedDigest);\n                return newCachedDigest.value;\n            });\n        };\n        DigestCache.prototype.clear = function () {\n            this._digests.clear();\n        };\n        return DigestCache;\n    }());\n    exports.DigestCache = DigestCache;\n});\n\n},{\"../collections/collections\":34,\"../utils/util\":49}],40:[function(require,module,exports){\n(function (global){\n(function (factory) {/* istanbul ignore next */\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\"], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    var FetchClient = (function () {\n        function FetchClient() {\n        }\n        FetchClient.prototype.fetch = function (url, options) {\n            return global.fetch(url, options);\n        };\n        return FetchClient;\n    }());\n    exports.FetchClient = FetchClient;\n});\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],41:[function(require,module,exports){\n(function (factory) {/* istanbul ignore next */\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\", \"./fetchClient\", \"./digestCache\", \"../utils/util\"], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    var fetchClient_1 = require(\"./fetchClient\");\n    var digestCache_1 = require(\"./digestCache\");\n    var Util = require(\"../utils/util\");\n    var HttpClient = (function () {\n        function HttpClient(_impl) {\n            if (_impl === void 0) { _impl = new fetchClient_1.FetchClient(); }\n            this._impl = _impl;\n            this._digestCache = new digestCache_1.DigestCache(this);\n        }\n        HttpClient.prototype.fetch = function (url, options) {\n            if (options === void 0) { options = {}; }\n            var self = this;\n            var opts = Util.extend(options, { cache: \"no-cache\", credentials: \"same-origin\" }, true);\n            var headers = new Headers();\n            if (typeof options.headers !== \"undefined\") {\n                var temp = new Request(\"\", { headers: options.headers });\n                temp.headers.forEach(function (value, name) {\n                    headers.append(name, value);\n                });\n            }\n            if (!headers.has(\"Accept\")) {\n                headers.append(\"Accept\", \"application/json\");\n            }\n            if (!headers.has(\"Content-type\")) {\n                headers.append(\"Content-type\", \"application/json;odata=verbose;charset=utf-8\");\n            }\n            opts = Util.extend(opts, { headers: headers });\n            if (opts.method && opts.method.toUpperCase() !== \"GET\") {\n                if (!headers.has(\"X-RequestDigest\")) {\n                    var index = url.indexOf(\"/_api/\");\n                    if (index < 0) {\n                        throw new Error(\"Unable to determine API url\");\n                    }\n                    var webUrl = url.substr(0, index);\n                    return this._digestCache.getDigest(webUrl)\n                        .then(function (digest) {\n                        headers.append(\"X-RequestDigest\", digest);\n                        return self.fetchRaw(url, opts);\n                    });\n                }\n            }\n            return self.fetchRaw(url, opts);\n        };\n        HttpClient.prototype.fetchRaw = function (url, options) {\n            if (options === void 0) { options = {}; }\n            return this._impl.fetch(url, options);\n        };\n        HttpClient.prototype.get = function (url, options) {\n            if (options === void 0) { options = {}; }\n            var opts = Util.extend(options, { method: \"GET\" });\n            return this.fetch(url, opts);\n        };\n        HttpClient.prototype.post = function (url, options) {\n            if (options === void 0) { options = {}; }\n            var opts = Util.extend(options, { method: \"POST\" });\n            return this.fetch(url, opts);\n        };\n        return HttpClient;\n    }());\n    exports.HttpClient = HttpClient;\n});\n\n},{\"../utils/util\":49,\"./digestCache\":39,\"./fetchClient\":40}],42:[function(require,module,exports){\n(function (factory) {/* istanbul ignore next */\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\", \"./utils/Util\", \"./SharePoint/SharePoint\", \"./utils/Storage\", \"./configuration/configuration\", \"./utils/logging\"], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    var Util = require(\"./utils/Util\");\n    var SharePoint_1 = require(\"./SharePoint/SharePoint\");\n    var Storage_1 = require(\"./utils/Storage\");\n    var Configuration = require(\"./configuration/configuration\");\n    var logging_1 = require(\"./utils/logging\");\n    /**\n     * Root class of the Patterns and Practices namespace, provides an entry point to the library\n     */\n    var PnP = (function () {\n        function PnP() {\n        }\n        /**\n         * Utility methods\n         */\n        PnP.util = Util;\n        /**\n         * SharePoint\n         */\n        PnP.sharepoint = new SharePoint_1.SharePoint();\n        /**\n         * Provides access to local and session storage through\n         */\n        PnP.storage = new Storage_1.PnPClientStorage();\n        /**\n         * Configuration\n         */\n        PnP.configuration = Configuration;\n        /**\n         * Global logging instance to which subscribers can be registered and messages written\n         */\n        PnP.logging = new logging_1.Logger();\n        return PnP;\n    }());\n    return PnP;\n});\n\n},{\"./SharePoint/SharePoint\":31,\"./configuration/configuration\":35,\"./utils/Storage\":44,\"./utils/Util\":45,\"./utils/logging\":47}],43:[function(require,module,exports){\narguments[4][32][0].apply(exports,arguments)\n},{\"dup\":32}],44:[function(require,module,exports){\n(function (factory) {/* istanbul ignore next */\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\", \"./Util\"], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    var Util = require(\"./Util\");\n    /**\n     * A wrapper class to provide a consistent interface to browser based storage\n     *\n     */\n    var PnPClientStorageWrapper = (function () {\n        /**\n         * Creates a new instance of the PnPClientStorageWrapper class\n         *\n         * @constructor\n         */\n        function PnPClientStorageWrapper(store, defaultTimeoutMinutes) {\n            this.store = store;\n            this.defaultTimeoutMinutes = defaultTimeoutMinutes;\n            this.defaultTimeoutMinutes = (defaultTimeoutMinutes === void 0) ? 5 : defaultTimeoutMinutes;\n            this.enabled = this.test();\n        }\n        /**\n         * Get a value from storage, or null if that value does not exist\n         *\n         * @param key The key whose value we want to retrieve\n         */\n        PnPClientStorageWrapper.prototype.get = function (key) {\n            if (!this.enabled) {\n                return null;\n            }\n            var o = this.store.getItem(key);\n            if (o == null) {\n                return o;\n            }\n            var persistable = JSON.parse(o);\n            if (new Date(persistable.expiration) <= new Date()) {\n                this.delete(key);\n                o = null;\n            }\n            else {\n                o = persistable.value;\n            }\n            return o;\n        };\n        /**\n         * Adds a value to the underlying storage\n         *\n         * @param key The key to use when storing the provided value\n         * @param o The value to store\n         * @param expire Optional, if provided the expiration of the item, otherwise the default is used\n         */\n        PnPClientStorageWrapper.prototype.put = function (key, o, expire) {\n            if (this.enabled) {\n                this.store.setItem(key, this.createPersistable(o, expire));\n            }\n        };\n        /**\n         * Deletes a value from the underlying storage\n         *\n         * @param key The key of the pair we want to remove from storage\n         */\n        PnPClientStorageWrapper.prototype.delete = function (key) {\n            if (this.enabled) {\n                this.store.removeItem(key);\n            }\n        };\n        /**\n         * Gets an item from the underlying storage, or adds it if it does not exist using the supplied getter function\n         *\n         * @param key The key to use when storing the provided value\n         * @param getter A function which will upon execution provide the desired value\n         * @param expire Optional, if provided the expiration of the item, otherwise the default is used\n         */\n        PnPClientStorageWrapper.prototype.getOrPut = function (key, getter, expire) {\n            if (!this.enabled) {\n                return getter();\n            }\n            if (!Util.isFunction(getter)) {\n                throw \"Function expected for parameter 'getter'.\";\n            }\n            var o = this.get(key);\n            if (o == null) {\n                o = getter();\n                this.put(key, o);\n            }\n            return o;\n        };\n        /**\n         * Used to determine if the wrapped storage is available currently\n         */\n        PnPClientStorageWrapper.prototype.test = function () {\n            var str = \"test\";\n            try {\n                this.store.setItem(str, str);\n                this.store.removeItem(str);\n                return true;\n            }\n            catch (e) {\n                return false;\n            }\n        };\n        /**\n         * Creates the persistable to store\n         */\n        PnPClientStorageWrapper.prototype.createPersistable = function (o, expire) {\n            if (typeof expire === \"undefined\") {\n                expire = Util.dateAdd(new Date(), \"minute\", this.defaultTimeoutMinutes);\n            }\n            return JSON.stringify({ expiration: expire, value: o });\n        };\n        return PnPClientStorageWrapper;\n    }());\n    exports.PnPClientStorageWrapper = PnPClientStorageWrapper;\n    /**\n     * A class that will establish wrappers for both local and session storage\n     */\n    var PnPClientStorage = (function () {\n        /**\n         * Creates a new instance of the PnPClientStorage class\n         *\n         * @constructor\n         */\n        function PnPClientStorage() {\n            this.local = typeof localStorage !== \"undefined\" ? new PnPClientStorageWrapper(localStorage) : null;\n            this.session = typeof sessionStorage !== \"undefined\" ? new PnPClientStorageWrapper(sessionStorage) : null;\n        }\n        return PnPClientStorage;\n    }());\n    exports.PnPClientStorage = PnPClientStorage;\n});\n\n},{\"./Util\":45}],45:[function(require,module,exports){\n(function (factory) {/* istanbul ignore next */\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\"], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    /**\n     * Gets a callback function which will maintain context across async calls.\n     * Allows for the calling pattern getCtxCallback(thisobj, method, methodarg1, methodarg2, ...)\n     *\n     * @param context The object that will be the 'this' value in the callback\n     * @param method The method to which we will apply the context and parameters\n     * @param params Optional, additional arguments to supply to the wrapped method when it is invoked\n     */\n    function getCtxCallback(context, method) {\n        var params = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            params[_i - 2] = arguments[_i];\n        }\n        return function () {\n            method.apply(context, params);\n        };\n    }\n    exports.getCtxCallback = getCtxCallback;\n    /**\n     * Tests if a url param exists\n     *\n     * @param name The name of the url paramter to check\n     */\n    function urlParamExists(name) {\n        name = name.replace(/[\\[]/, \"\\\\[\").replace(/[\\]]/, \"\\\\]\");\n        var regex = new RegExp(\"[\\\\?&]\" + name + \"=([^&#]*)\");\n        return regex.test(location.search);\n    }\n    exports.urlParamExists = urlParamExists;\n    /**\n     * Gets a url param value by name\n     *\n     * @param name The name of the paramter for which we want the value\n     */\n    function getUrlParamByName(name) {\n        name = name.replace(/[\\[]/, \"\\\\[\").replace(/[\\]]/, \"\\\\]\");\n        var regex = new RegExp(\"[\\\\?&]\" + name + \"=([^&#]*)\");\n        var results = regex.exec(location.search);\n        return results == null ? \"\" : decodeURIComponent(results[1].replace(/\\+/g, \" \"));\n    }\n    exports.getUrlParamByName = getUrlParamByName;\n    /**\n     * Gets a url param by name and attempts to parse a bool value\n     *\n     * @param name The name of the paramter for which we want the boolean value\n     */\n    function getUrlParamBoolByName(name) {\n        var p = getUrlParamByName(name);\n        var isFalse = (p === \"\" || /false|0/i.test(p));\n        return !isFalse;\n    }\n    exports.getUrlParamBoolByName = getUrlParamBoolByName;\n    /**\n     * Inserts the string s into the string target as the index specified by index\n     *\n     * @param target The string into which we will insert s\n     * @param index The location in target to insert s (zero based)\n     * @param s The string to insert into target at position index\n     */\n    function stringInsert(target, index, s) {\n        if (index > 0) {\n            return target.substring(0, index) + s + target.substring(index, target.length);\n        }\n        return s + target;\n    }\n    exports.stringInsert = stringInsert;\n    /**\n     * Adds a value to a date\n     *\n     * @param date The date to which we will add units, done in local time\n     * @param interval The name of the interval to add, one of: ['year', 'quarter', 'month', 'week', 'day', 'hour', 'minute', 'second']\n     * @param units The amount to add to date of the given interval\n     *\n     * http://stackoverflow.com/questions/1197928/how-to-add-30-minutes-to-a-javascript-date-object\n     */\n    function dateAdd(date, interval, units) {\n        var ret = new Date(date.toLocaleString()); // don't change original date\n        switch (interval.toLowerCase()) {\n            case \"year\":\n                ret.setFullYear(ret.getFullYear() + units);\n                break;\n            case \"quarter\":\n                ret.setMonth(ret.getMonth() + 3 * units);\n                break;\n            case \"month\":\n                ret.setMonth(ret.getMonth() + units);\n                break;\n            case \"week\":\n                ret.setDate(ret.getDate() + 7 * units);\n                break;\n            case \"day\":\n                ret.setDate(ret.getDate() + units);\n                break;\n            case \"hour\":\n                ret.setTime(ret.getTime() + units * 3600000);\n                break;\n            case \"minute\":\n                ret.setTime(ret.getTime() + units * 60000);\n                break;\n            case \"second\":\n                ret.setTime(ret.getTime() + units * 1000);\n                break;\n            default:\n                ret = undefined;\n                break;\n        }\n        return ret;\n    }\n    exports.dateAdd = dateAdd;\n    /**\n     * Loads a stylesheet into the current page\n     *\n     * @param path The url to the stylesheet\n     * @param avoidCache If true a value will be appended as a query string to avoid browser caching issues\n     */\n    function loadStylesheet(path, avoidCache) {\n        if (avoidCache) {\n            path += \"?\" + encodeURIComponent((new Date()).getTime().toString());\n        }\n        var head = document.getElementsByTagName(\"head\");\n        if (head.length > 1) {\n            var e = document.createElement(\"link\");\n            head[0].appendChild(e);\n            e.setAttribute(\"type\", \"text/css\");\n            e.setAttribute(\"rel\", \"stylesheet\");\n            e.setAttribute(\"href\", path);\n        }\n    }\n    exports.loadStylesheet = loadStylesheet;\n    /**\n     * Combines an arbitrary set of paths ensuring that the slashes are normalized\n     *\n     * @param paths 0 to n path parts to combine\n     */\n    function combinePaths() {\n        var paths = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            paths[_i - 0] = arguments[_i];\n        }\n        var parts = [];\n        for (var i = 0; i < paths.length; i++) {\n            if (typeof paths[i] !== \"undefined\" && paths[i] !== null) {\n                parts.push(paths[i].replace(/^[\\\\|\\/]/, \"\").replace(/[\\\\|\\/]$/, \"\"));\n            }\n        }\n        return parts.join(\"/\").replace(/\\\\/, \"/\");\n    }\n    exports.combinePaths = combinePaths;\n    /**\n     * Gets a random string of chars length\n     *\n     * @param chars The length of the random string to generate\n     */\n    function getRandomString(chars) {\n        var text = \"\";\n        var possible = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n        for (var i = 0; i < chars; i++) {\n            text += possible.charAt(Math.floor(Math.random() * possible.length));\n        }\n        return text;\n    }\n    exports.getRandomString = getRandomString;\n    /**\n     * Gets a random GUID value\n     *\n     * http://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript\n     */\n    function getGUID() {\n        var d = new Date().getTime();\n        var guid = \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function (c) {\n            var r = (d + Math.random() * 16) % 16 | 0;\n            d = Math.floor(d / 16);\n            return (c === \"x\" ? r : (r & 0x3 | 0x8)).toString(16);\n        });\n        return guid;\n    }\n    exports.getGUID = getGUID;\n    /**\n     * Determines if a given value is a function\n     *\n     * @param candidateFunction The thing to test for being a function\n     */\n    function isFunction(candidateFunction) {\n        return typeof candidateFunction === \"function\";\n    }\n    exports.isFunction = isFunction;\n    /**\n     * Determines if a string is null or empty or undefined\n     *\n     * @param s The string to test\n     */\n    function stringIsNullOrEmpty(s) {\n        return typeof s === \"undefined\" || s === null || s === \"\";\n    }\n    exports.stringIsNullOrEmpty = stringIsNullOrEmpty;\n    /**\n     * Provides functionality to extend the given object by doign a shallow copy\n     *\n     * @param target The object to which properties will be copied\n     * @param source The source object from which properties will be copied\n     * @param noOverwrite If true existing properties on the target are not overwritten from the source\n     *\n     */\n    /* tslint:disable:forin */\n    function extend(target, source, noOverwrite) {\n        if (noOverwrite === void 0) { noOverwrite = false; }\n        var result = {};\n        for (var id in target) {\n            result[id] = target[id];\n        }\n        // ensure we don't overwrite things we don't want overwritten\n        var check = noOverwrite ? function (o, i) { return !o.hasOwnProperty(i); } : function (o, i) { return true; };\n        for (var id in source) {\n            if (check(result, id)) {\n                result[id] = source[id];\n            }\n        }\n        return result;\n    }\n    exports.extend = extend;\n    /* tslint:enable */\n    /**\n     * Applies one or more mixins to the supplied target\n     *\n     * @param derivedCtor The classto which we will apply the mixins\n     * @param baseCtors One or more mixin classes to apply\n     */\n    function applyMixins(derivedCtor) {\n        var baseCtors = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            baseCtors[_i - 1] = arguments[_i];\n        }\n        baseCtors.forEach(function (baseCtor) {\n            Object.getOwnPropertyNames(baseCtor.prototype).forEach(function (name) {\n                derivedCtor.prototype[name] = baseCtor.prototype[name];\n            });\n        });\n    }\n    exports.applyMixins = applyMixins;\n});\n\n},{}],46:[function(require,module,exports){\n(function (factory) {/* istanbul ignore next */\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\", \"./util\"], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    var Util = require(\"./util\");\n    /**\n     * Throws an exception if the supplied string value is null or emptry\n     *\n     * @param value The string to test\n     * @param parameterName The name of the parameter, included in the thrown exception message\n     */\n    function stringIsNullOrEmpty(value, parameterName) {\n        if (Util.stringIsNullOrEmpty(value)) {\n            throw \"Parameter '\" + parameterName + \"' cannot be null or empty.\";\n        }\n    }\n    exports.stringIsNullOrEmpty = stringIsNullOrEmpty;\n    /**\n     * Throws an exception if the supplied object is null\n     *\n     * @param value The object to test\n     * @param parameterName The name of the parameter, included in the thrown exception message\n     */\n    function objectIsNull(value, parameterName) {\n        if (typeof value === \"undefined\" || value === null) {\n            throw \"Parameter '\" + parameterName + \"' cannot be null.\";\n        }\n    }\n    exports.objectIsNull = objectIsNull;\n});\n\n},{\"./util\":49}],47:[function(require,module,exports){\n(function (factory) {/* istanbul ignore next */\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\", \"./args\"], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    var Args = require(\"./args\");\n    /**\n     * A set of logging levels\n     *\n     */\n    (function (LogLevel) {\n        LogLevel[LogLevel[\"Verbose\"] = 0] = \"Verbose\";\n        LogLevel[LogLevel[\"Info\"] = 1] = \"Info\";\n        LogLevel[LogLevel[\"Warning\"] = 2] = \"Warning\";\n        LogLevel[LogLevel[\"Error\"] = 3] = \"Error\";\n        LogLevel[LogLevel[\"Off\"] = 99] = \"Off\";\n    })(exports.LogLevel || (exports.LogLevel = {}));\n    var LogLevel = exports.LogLevel;\n    /**\n     * Class used to subscribe ILogListener and log messages throughout an application\n     *\n     */\n    var Logger = (function () {\n        /**\n         * Creates a new instance of the Logger class\n         *\n         * @constructor\n         * @param activeLogLevel the level used to filter messages (Default: LogLevel.Warning)\n         * @param subscribers [Optional] if provided will initialize the array of subscribed listeners\n         */\n        function Logger(activeLogLevel, subscribers) {\n            if (activeLogLevel === void 0) { activeLogLevel = LogLevel.Warning; }\n            if (subscribers === void 0) { subscribers = []; }\n            this.activeLogLevel = activeLogLevel;\n            this.subscribers = subscribers;\n        }\n        /**\n         * Adds an ILogListener instance to the set of subscribed listeners\n         *\n         */\n        Logger.prototype.subscribe = function (listener) {\n            Args.objectIsNull(listener, \"listener\");\n            this.subscribers.push(listener);\n        };\n        /**\n         * Gets the current subscriber count\n         */\n        Logger.prototype.count = function () {\n            return this.subscribers.length;\n        };\n        /**\n         * Writes the supplied string to the subscribed listeners\n         *\n         * @param message The message to write\n         * @param level [Optional] if supplied will be used as the level of the entry (Default: LogLevel.Verbose)\n         */\n        Logger.prototype.write = function (message, level) {\n            if (level === void 0) { level = LogLevel.Verbose; }\n            this.log({ level: level, message: message });\n        };\n        /**\n         * Logs the supplied entry to the subscribed listeners\n         *\n         * @param entry The message to log\n         */\n        Logger.prototype.log = function (entry) {\n            Args.objectIsNull(entry, \"entry\");\n            if (entry.level < this.activeLogLevel) {\n                return;\n            }\n            for (var i = 0; i < this.subscribers.length; i++) {\n                this.subscribers[i].log(entry);\n            }\n        };\n        /**\n         * Logs performance tracking data for the the execution duration of the supplied function using console.profile\n         *\n         * @param name The name of this profile boundary\n         * @param f The function to execute and track within this performance boundary\n         */\n        Logger.prototype.measure = function (name, f) {\n            console.profile(name);\n            try {\n                return f();\n            }\n            finally {\n                console.profileEnd();\n            }\n        };\n        return Logger;\n    }());\n    exports.Logger = Logger;\n    /**\n     * Implementation of ILogListener which logs to the browser console\n     *\n     */\n    var ConsoleListener = (function () {\n        function ConsoleListener() {\n        }\n        /**\n         * Any associated data that a given logging listener may choose to log or ignore\n         *\n         * @param entry The information to be logged\n         */\n        ConsoleListener.prototype.log = function (entry) {\n            var msg = this.format(entry);\n            switch (entry.level) {\n                case LogLevel.Verbose:\n                case LogLevel.Info:\n                    console.log(msg);\n                    break;\n                case LogLevel.Warning:\n                    console.warn(msg);\n                    break;\n                case LogLevel.Error:\n                    console.error(msg);\n                    break;\n            }\n        };\n        /**\n         * Formats the message\n         *\n         * @param entry The information to format into a string\n         */\n        ConsoleListener.prototype.format = function (entry) {\n            return \"Message: \" + entry.message + \". Data: \" + JSON.stringify(entry.data);\n        };\n        return ConsoleListener;\n    }());\n    exports.ConsoleListener = ConsoleListener;\n    /* tslint:disable */\n    /**\n     * Implementation of ILogListener which logs to Azure Insights\n     *\n     */\n    var AzureInsightsListener = (function () {\n        /**\n         * Creats a new instance of the AzureInsightsListener class\n         *\n         * @constructor\n         * @param azureInsightsInstrumentationKey The instrumentation key created when the Azure Insights instance was created\n         */\n        function AzureInsightsListener(azureInsightsInstrumentationKey) {\n            this.azureInsightsInstrumentationKey = azureInsightsInstrumentationKey;\n            Args.stringIsNullOrEmpty(azureInsightsInstrumentationKey, \"azureInsightsInstrumentationKey\");\n            var appInsights = window[\"appInsights\"] || function (config) {\n                function r(config) {\n                    t[config] = function () {\n                        var i = arguments;\n                        t.queue.push(function () { t[config].apply(t, i); });\n                    };\n                }\n                var t = { config: config }, u = document, e = window, o = \"script\", s = u.createElement(o), i, f;\n                for (s.src = config.url || \"//az416426.vo.msecnd.net/scripts/a/ai.0.js\", u.getElementsByTagName(o)[0].parentNode.appendChild(s), t.cookie = u.cookie, t.queue = [], i = [\"Event\", \"Exception\", \"Metric\", \"PageView\", \"Trace\"]; i.length;) {\n                    r(\"track\" + i.pop());\n                }\n                return r(\"setAuthenticatedUserContext\"), r(\"clearAuthenticatedUserContext\"), config.disableExceptionTracking || (i = \"onerror\", r(\"_\" + i), f = e[i], e[i] = function (config, r, u, e, o) {\n                    var s = f && f(config, r, u, e, o);\n                    return s !== !0 && t[\"_\" + i](config, r, u, e, o), s;\n                }), t;\n            }({\n                instrumentationKey: this.azureInsightsInstrumentationKey\n            });\n            window[\"appInsights\"] = appInsights;\n        }\n        /**\n         * Any associated data that a given logging listener may choose to log or ignore\n         *\n         * @param entry The information to be logged\n         */\n        AzureInsightsListener.prototype.log = function (entry) {\n            var ai = window[\"appInsights\"];\n            var msg = this.format(entry);\n            if (entry.level === LogLevel.Error) {\n                ai.trackException(msg);\n            }\n            else {\n                ai.trackEvent(msg);\n            }\n        };\n        /**\n         * Formats the message\n         *\n         * @param entry The information to format into a string\n         */\n        AzureInsightsListener.prototype.format = function (entry) {\n            return \"Message: \" + entry.message + \". Data: \" + JSON.stringify(entry.data);\n        };\n        return AzureInsightsListener;\n    }());\n    exports.AzureInsightsListener = AzureInsightsListener;\n    /* tslint:enable */\n    /**\n     * Implementation of ILogListener which logs to the supplied function\n     *\n     */\n    var FunctionListener = (function () {\n        /**\n         * Creates a new instance of the FunctionListener class\n         *\n         * @constructor\n         * @param  method The method to which any logging data will be passed\n         */\n        function FunctionListener(method) {\n            this.method = method;\n        }\n        /**\n         * Any associated data that a given logging listener may choose to log or ignore\n         *\n         * @param entry The information to be logged\n         */\n        FunctionListener.prototype.log = function (entry) {\n            this.method(entry);\n        };\n        return FunctionListener;\n    }());\n    exports.FunctionListener = FunctionListener;\n});\n\n},{\"./args\":46}],48:[function(require,module,exports){\narguments[4][44][0].apply(exports,arguments)\n},{\"./Util\":45,\"dup\":44}],49:[function(require,module,exports){\narguments[4][45][0].apply(exports,arguments)\n},{\"dup\":45}]},{},[42])(42)\n});"],"sourceRoot":"/source/"}